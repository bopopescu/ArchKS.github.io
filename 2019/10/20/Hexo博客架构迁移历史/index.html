<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    
    <title>Hexo博客架构迁移历史 | 无心而为</title>
    
    <link rel="alternative" href="/atom.xml" title="无心而为" type="application/atom+xml">
    
    
<link rel="stylesheet" href="/css/style.css">

    
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css" charset="utf-8">
    
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<meta name="generator" content="Hexo 4.2.0"></head>
<body class="site">
    <header class="site-header">
        <h1 class="site-title"><a href="/">无心而为</a></h1>
        <nav class="site-nav">
            <ul class="nav">
                
                <li><a href="/archives">Archives</a></li>
                
                
                <li><a href="/atom.xml" title="RSS Feed">rss</a></li>
                
                <li><a class="toggle-search" href="#search">search</a></li>
            </ul>
        </nav>
        <div class="site-search" id="search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://ymlog.cn"></form>
        </div>
        
            <div class="site-header-background" style="background-image:url(http://reumia.github.io/hexo-theme-zzoman2015/images/background-zzoman2015.jpg)"></div>
        
    </header>
    <div class="site-body">
        <div class="global-width">
    <article class="article" data-layout="post" data-slug="Hexo博客架构迁移历史">
        <div class="article-content">
            
            
            <header class="article-header">
                <div class="article-meta">
                    <a href="/2019/10/20/Hexo%E5%8D%9A%E5%AE%A2%E6%9E%B6%E6%9E%84%E8%BF%81%E7%A7%BB%E5%8E%86%E5%8F%B2/" class="article-date">
  <time datetime="2019-10-20T13:58:02.000Z">2019-10-20</time>
</a>
                    
  <div class="article-category categories">
    <a class="category-link" href="/categories/Linux/">Linux</a>
  </div>

                    
                </div>
                
    <h1 class="article-title" itemprop="name">
      <a href="/2019/10/20/Hexo%E5%8D%9A%E5%AE%A2%E6%9E%B6%E6%9E%84%E8%BF%81%E7%A7%BB%E5%8E%86%E5%8F%B2/">Hexo博客架构迁移历史</a>
    </h1>

            </header>
            
            <div class="article-body">
                <p>在2019年10月20日之前，一直在使用叶落阁的主题。之后换到了Clic的主题，期间有一系列的报错导致Clic的主题不能部署在容器中，所以重构了网站结构，特此纪念。或许当某一天用不习惯Clic的主题，这篇文章就又会更新了。</p>
<h1 id="叶落阁主题"><a href="#叶落阁主题" class="headerlink" title="叶落阁主题"></a>叶落阁主题</h1><blockquote>
<p><a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" rel="noopener">https://github.com/yelog/hexo-theme-3-hexo</a></p>
</blockquote>
<p><img src="https://i.loli.net/2019/10/20/O2PCKLY4bolufX6.png" alt="叶落阁"></p>
<p>这个Hexo的内容是放在Linux主机中的，然后用NFS文件共享同步到Windows本地。只需在Windows本地编辑，即可上传。</p>
<p>Hexo容器生成命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name my-hexo -p 80:4000 -v /Log/:/opt/hexo/ipple1986/<span class="built_in">source</span>/_posts ipple1986/hexo</span><br></pre></td></tr></table></figure>

<p>我还开启了weavescope监控，但由于端口暴露在外面，别人可以轻而易举的访问Linux主机和Docker容器，所以一般情况下选择禁用。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo curl -L git.io/scope -o /usr/<span class="built_in">local</span>/bin/scope</span><br><span class="line">sudo chmod a+x /usr/<span class="built_in">local</span>/bin/scope</span><br><span class="line">scope launch</span><br></pre></td></tr></table></figure>

<p>文件传输模式</p>
<p><img src="https://i.loli.net/2019/10/20/JMGuF75O3e6iY9z.png" alt="File_Move"></p>
<h1 id="Clic主题"><a href="#Clic主题" class="headerlink" title="Clic主题"></a>Clic主题</h1><blockquote>
<p><a href="https://github.com/Siricee/hexo-theme-Chic#introduction" target="_blank" rel="noopener">https://github.com/Siricee/hexo-theme-Chic#introduction</a></p>
</blockquote>
<p><img src="https://camo.githubusercontent.com/58dfbf6fc501c3cefa5d63bfe5c6baaace41a9b5/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30362f31322f3564303036626432383961613332353033372e706e67" alt="Clic Theme"></p>
<p>在使用Hexo这个主题时，我是将其部署在docker中，但docker中hexo的版本很低，没有办法，只好换了方式部署。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@~ipple1986]# hexo -v</span><br><span class="line">hexo: 3.3.7</span><br><span class="line">hexo-cli: 3.1.0</span><br><span class="line">node: 10.16.3</span><br></pre></td></tr></table></figure>

<p>文件迁移过程：</p>
<p><img src="https://i.loli.net/2019/10/20/KiXM9bYRFZsjx74.png" alt="File_Move"></p>
<p>现在是将hexo生成静态网页，然后用Nginx部署。在windows本地写博客，然后把写好的博客推送到Github上，然后在服务器端写一个脚本，每天凌晨一点半下载Github上的静态页面，然后存储到本地/usr/share/nginx/html/blog下。<br>这样写有两点好处</p>
<ul>
<li>一是直接访问Github托管的网站，用户速度会很慢，影响使用体验</li>
<li>而是可以用Nginx，对访问进行监管和记录，达到学习Nginx的目的。</li>
</ul>
<p>拉取Github静态网站的脚本：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/ArchKS/ArchKS.github.io.git blog</span><br><span class="line">rm /usr/share/nginx/html/blog -rf</span><br><span class="line">mv blog /usr/share/nginx/html/</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<p>定时任务:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@niki important]# crontab -l</span><br><span class="line">30 1 * * * bash &#x2F;root&#x2F;important&#x2F;blog.sh</span><br></pre></td></tr></table></figure>



<h1 id="Pure主题"><a href="#Pure主题" class="headerlink" title="Pure主题"></a>Pure主题</h1><p>2019年12月25日，圣诞节，换了个主题，以前用的Chic的主题不用了，换成了pure的主题，但工作原理和流程和上面的那个一样，这里就不过多赘述了。先上图纪念一下以前用的那个主题：</p>
<p><img src="https://i.loli.net/2019/12/26/CvWYopaZ1wmR29J.png" alt="image.png"></p>
<p>也打算精简一下我的博客内容了，以前是什么笔记都网上放，现在尽量放一些整理的东西。</p>

            </div>
        </div>
    </article>

    
    
<nav class="article-nav">
  
    <a href="/2019/10/21/Python%E7%88%AC%E8%99%AB%E5%A4%A7%E7%BA%B2%E6%A6%82%E8%BF%B0/" id="article-nav-newer" class="article-nav-link-wrap prev">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Python爬虫大纲概述
        
      </div>
    </a>
  
  
    <a href="/2019/10/10/Vim%E5%BF%AB%E6%8D%B7%E9%94%AE/" id="article-nav-older" class="article-nav-link-wrap next">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Vim快捷键</div>
    </a>
  
</nav>

    

    
</div>
    </div>
    <footer class="site-footer">
        <div class="global-width">
            <ul class="site-widget">
                
                <li class="widget widget-tag">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-category">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E7%94%B1%E6%8A%80%E6%9C%AF/">路由技术</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-recent_posts">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-body">
      <ul>
        
          <li>
            <a href="/2020/12/30/%E6%84%BF%E6%9C%89%E6%B6%93%E6%B6%93%E8%AF%97%E6%84%8F%E6%B8%85%E6%96%B0%E5%85%A5%E8%84%BE%EF%BC%8C%E4%BB%A5%E9%A3%A8%E5%BF%99%E7%A2%8C%E7%9A%84%E6%97%A5%E5%B8%B8/">愿有涓涓诗意清新入脾，以飨忙碌的日常</a>
          </li>
        
          <li>
            <a href="/2020/06/16/Jetbrains%E5%BF%AB%E6%8D%B7%E9%94%AE/">Jetbrains快捷键</a>
          </li>
        
          <li>
            <a href="/2020/06/16/Chrome%E5%BF%AB%E6%8D%B7%E9%94%AE/">Chrome快捷键</a>
          </li>
        
          <li>
            <a href="/2020/06/16/VsCode%E5%BF%AB%E6%8D%B7%E9%94%AE/">VSCode快捷键</a>
          </li>
        
          <li>
            <a href="/2020/06/04/KVM%E5%AE%9E%E4%BE%8B/">KVM实例总结</a>
          </li>
        
      </ul>
    </div>
  </div>

                </li>
                
            </ul>
        </div>
        <div class="site-info">
            <address>
                &copy; 2014 <a href="http://ymlog.cn">无心而为</a> All Right Reserved. <br/>
                Powered by <a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a>. Theme by <a href="http://zzoman.com" target="_blank" rel="noopener">ZZOMAN</a>
            </address>
        </div>
    </footer>
    
    <script src="/libs/jquery-1.11.3.min.js" type="text/javascript"></script>
    
    <script src="/libs/fancybox/jquery.fancybox.js" type="text/javascript"></script>
    
    <script src="/js/site_init.js" type="text/javascript"></script>
    
</body>
</html>