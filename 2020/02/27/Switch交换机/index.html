<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>Switch交换机</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=Edge，chrome=1"><meta name="description"><meta name="keywords"><meta name="author" content="ZEN"><link rel="short icon" href="../../../../images/favicon.png"><link rel="icon" href="../../../../images/favicon.png"><!--[if lt IE 9]>
<script src="../../../../js/modernizr.js"></script>
<![endif]-->
<link rel="stylesheet" href="../../../../css/iconfont.css">

<link rel="stylesheet" href="../../../../css/index.css?v=202006181108.css">
<link rel="stylesheet" href="../../../../css/info.css?v=202006181108.css">
<link href="https://cdn.bootcss.com/highlight.js/9.15.9/styles/github.min.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="atom.xml" title="zen's blog" type="application/atom+xml">
</head><body><header id="header" class="header-navigation"><nav><div class="logo"><a href="http://ymlog.cn">zen's blog</a></div><h2 id="mnavh"><span class="navicon"></span></h2><ul id="starlist"><li><a href="../../../../index.html">首页</a></li><li><a href="../../../../time.html">时间轴</a></li></ul><div class="searchbox"><div id="search_bar" class="search_bar"><input id="keyboard" placeholder="想搜点什么呢.." type="text" name="keyboard" autocomplete="off" class="input"><p class="search_ico"><span></span></p></div></div></nav></header><article><main><div class="con_warp"><div class="infosbox"><div class="newsview"><h3 class="news_title">Switch交换机</h3><div class="bloginfo"><ul><li class="author">作者：<a href="/">ZEN</a></li><li class="lmname"><a href="/">路由技术</a></li><li class="timer">时间：2020-02-27 20:34:14</li><li class="view"><span id="busuanzi_value_page_pv">99</span><span>次访问</span></li></ul></div><div class="tags"></div><div class="news_con"><div style="color:red">淦，实在不知道用什么封面了，网上关于Lay2 Lay3 Switch都巨丑，用自己正在打字的电脑做封面吧^_^??</div>
<br>

<p>交换技术主要用于构建局域网，主要实现的局域网内的通信和隔离。交换机即插即用，因为所有的接口默认分配在vlan 1 中，且vlan 1为native vlan，不需要进行封装。为了实现局域网的隔离，可以将不同的接口或者MAC地址划分到不同的vlan，同一个vlan下的地址可以相互通信。</p>
<p>交换机主要存在的问题和解决方法：</p>
<ol>
<li>广播风暴，链路防环：使用Spanning-Tree或者快速生成树(MSTP、RSTP等)以及一系列生成树补丁来解决</li>
<li>Vlan同步：交换机不能转发自己没有的vlan信息，比如一个只有vlan 10,20,30的交换机不能转发和接受vlan40的报文，有两种解决方式：（1）手动配置使之相同   （2）VTP vlan同步协议</li>
<li>带宽受限：因为spanning-tree的缘故，两个交换机之间只能存在一条链路，因此带宽受限。可以使用二层或三层链路捆绑，提高网络带宽</li>
<li>网关单点故障：因为只有一个默认网关，所以当down了之后，终端就无法与外界通信。可以使用网关冗余协议，如(FHRP,VRRP,GLBP)做高可用。</li>
</ol>
<p>讲到交换机不得不讲MAC地址，MAC地址和交换机同属于OSI七层的第二层——数据链路层。MAC地址一共有48位，前24位厂家分配，类似于手机的前几位网络识别号。MAC地址有如下字段：</p>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_1.png" alt="http://q5q3e2ctx.bkt.clouddn.com/switch_1.png"></p>
<p>其中：</p>
<ul>
<li>类型：用于标识上一层使用的协议</li>
<li>IP数据报长度：46 = 64 - 6 - 6 - 2 - 4</li>
<li>FCS：帧检验序列，使用CRC循环冗余校验</li>
</ul>
<h1 id="配置VLAN"><a href="#配置VLAN" class="headerlink" title="配置VLAN"></a>配置VLAN</h1><p>ps：vlan的隔离包括广播，即使是发ARP，也只会发在自己的vlan。</p>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_2.png" alt="http://q5q3e2ctx.bkt.clouddn.com/switch_2.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SW7 创建vlan</span></span><br><span class="line">vlan 10,20</span><br><span class="line"></span><br><span class="line"><span class="comment"># SW7 将接口加入到vlan，e0/1,2 e1/0,1 都是这样配</span></span><br><span class="line">int e0/1</span><br><span class="line">switchport mode access							<span class="comment"># 将接口模式改为access</span></span><br><span class="line">switchport access vlan 10						<span class="comment"># 将接口加入到vlan 10 中</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SW7 串口配置，即和SW8连接的e0/3接口</span></span><br><span class="line">int e0/3</span><br><span class="line">switchport trunk encapsulation dot1q			<span class="comment"># 一律使用802.1Q封装</span></span><br><span class="line">switchport mode trunk							<span class="comment"># 改变接口的模式为trunk</span></span><br></pre></td></tr></table></figure>



<p>交换机接口的三种模式：Vlan的链路类型可以分为接入链路和干道链路。</p>
<p>Access：只能属于1个VLAN，且该端口不打tag，一般用于连接计算机端口；　</p>
<p>Trunk：可以允许多个VLAN通过，且该端口都是打tag的，一般用于交换机之间的连接；　　</p>
<p>Hybrid：可以允许多个VLAN通过，至于该端口在vlan中是否打tag由用户根据具体情况而定，可以用于交换机之间的连接也可以用于交换机和用户计算机之间的连接。　　</p>
<p>Trunk和Hybrid的区别主要是，hybrid端口可以允许多个vlan的报文不打标签，而 trunk端口只允许缺省vlan的报文不打标签，同一个交换机上不能hybrid和trunk并存。</p>
<p>Trunk也可以由交换机自行协商，但一般都是网络管理员手动配置。</p>
<h1 id="VTP"><a href="#VTP" class="headerlink" title="VTP"></a>VTP</h1><p>VTP用于Vlan同步，分为三种模式：服务端(server)、客户端(client)、透传端(transparent)，客户端只可以查看不可以修改，服务端和透传端既可以查看又可以修改。</p>
<p>VTP只会同步vlan和vlan的名字，vlan的接口信息不会被同步走。</p>
<p>配置VTP</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置服务端</span></span><br><span class="line">vlan 10-20					<span class="comment"># 创建vlan</span></span><br><span class="line">vtp domain cisco			<span class="comment"># 更改域名， 可以改可以不改，用于让一个局域网有许多vtp</span></span><br><span class="line">vtp mode server 			<span class="comment"># 将本机vtp的模式改为server</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置透传端</span></span><br><span class="line">vtp domain cisco</span><br><span class="line">vtp mode transparent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置客户端</span></span><br><span class="line">vtp domain cisco</span><br><span class="line">vtp mode client</span><br></pre></td></tr></table></figure>



<p>其他命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Switch<span class="comment">#sh vlan brief 			# 查看本机vlan摘要</span></span><br><span class="line">Switch<span class="comment">#sh vtp ? 				# 查看vtp相关</span></span><br></pre></td></tr></table></figure>



<p>VTP修剪：一种优化vlan的方法</p>
<center style="font-weight:bold;">A ----> B -----> C -----D(I'm a PC)</center>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vtp pruning			<span class="comment"># 开启vtp修剪</span></span><br></pre></td></tr></table></figure>

<p>比如：A、B、C是交换机，D是PC。</p>
<p>A的vlan：10，20，30，40</p>
<p>B的vlan：10，20</p>
<p>C的vlan：10，20</p>
<p>一旦开启vtp修剪，则C会告诉B：”我这没有vlan30，40，以后不要给我发vlan30，40的广播或者其他消息了”，B收到后会告诉A：”我这没有vlan30 ，40，以后不要发这个vlan的消息了”。A就会把这接口上的这两个vlan剪掉。</p>
<h1 id="生成树"><a href="#生成树" class="headerlink" title="生成树"></a>生成树</h1><p>生成树（Spanning-tree）是一种工作在OSI网络模型中的第二层（数据链路层）的通信协议，基本应用是防止交换机冗余链路产生的环路.用于确保以太网中无环路的逻辑拓扑结构.从而避免了广播风暴,大量占用交换机的资源。</p>
<p>生成树使用封锁接口的方式避免环路，被封锁的接口有如下判定方式：</p>
<ol>
<li>每个广播域选择一个根桥（注意是广播域，不是局域网）Root Bridge</li>
<li>每个非根桥选择一个根端口  Root Port</li>
<li>每个段选择一个指定端口 Designated Port</li>
<li>选择一个非指定端口，以上所有选择策略，都是以越小越优为准则</li>
</ol>
<p>根桥的制定：谁的MAC地址最小，谁就是根桥</p>
<p>根端口的指定：谁离根桥进，谁就是根端口</p>
<p>指定端口的指定：</p>
<ol>
<li>离根桥近</li>
<li>COST值小</li>
<li>发送者的端口ID小，端口ID即交换机的接口</li>
</ol>
<p>非指定端口将被封锁。</p>
<p>全网一开始是如何知道谁是根桥？</p>
<p>全网交换机开机，一开始，每台交换机都认为自己是根桥ID向外发送BPDU报文，如果在收到的BPDU报文中，发现了比自己还小的MAC地址，就把根桥ID改为那一台交换机的ID。经过一段时间，就可以确定全网的唯一的根桥ID。（可以抢占）</p>
<p>BPDU报文格式：</p>
<table>
<thead>
<tr>
<th>字节</th>
<th>字段</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>协议</td>
<td>代表上层协议(BPDU)，该值总为0</td>
</tr>
<tr>
<td>1</td>
<td>版本</td>
<td>（802.1D的总为0）</td>
</tr>
<tr>
<td>1</td>
<td>TYPE</td>
<td>“配置BPDU” 为0，“TCN BPDU”为80，TCN，topology change notification，拓扑改变时发送的报文，自下而上。</td>
</tr>
<tr>
<td>1</td>
<td>标志</td>
<td>LSB最低有效位表示TC标志，MSB最高的有效位表示TCA标志</td>
</tr>
<tr>
<td>8</td>
<td>根桥ID</td>
<td>根网桥的桥ID</td>
</tr>
<tr>
<td>4</td>
<td>路径开销</td>
<td>到达根桥的STP cost，如果是根桥则写0，带宽越大，开销越低</td>
</tr>
<tr>
<td>8</td>
<td>网桥ID</td>
<td>BPDU发送桥的ID</td>
</tr>
<tr>
<td>2</td>
<td>端口ID</td>
<td>BPDU发送网桥的端口ID（优先级+端口号），优先级默认128</td>
</tr>
<tr>
<td>2</td>
<td>消息寿命Message age</td>
<td>从根网桥发出BPDU之后的秒数，每经过一个网桥都减1，本质上是到达根桥的跳数</td>
</tr>
<tr>
<td>2</td>
<td>最大寿命Max age</td>
<td>当一段时间未收到任何BPDU，生存期达到MAX age，网桥认为该端口连接链路发生故障，默认20S</td>
</tr>
<tr>
<td>2</td>
<td>HELLO时间</td>
<td>根网桥连续发送BPDU之间的时间间隔，默认2S</td>
</tr>
<tr>
<td>2</td>
<td>转发延迟</td>
<td>在监听和学习状态停留的时间间隔，默认15S</td>
</tr>
</tbody></table>
<p>关于生成树，要配置的内容很少，都是现象，因为一切默认都已经配置好了，除非是改变生成树的种类。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">show spanning-tree		<span class="comment">#查看生成树的状态</span></span><br><span class="line">spanning-tree vlan 1 priority 4096			<span class="comment">#修改VLAN中spanning-tree的优先级。必须是4096的倍数</span></span><br><span class="line">VLAN0001											<span class="comment">#VLAN 1</span></span><br><span class="line">  Spanning tree enabled protocol ieee</span><br><span class="line">  Root ID    Priority    32769						<span class="comment">#32769=32768+VLAN.Nbr</span></span><br><span class="line">             Address     aabb.cc00.0100				<span class="comment">#MAC地址</span></span><br><span class="line">             Cost        100						<span class="comment">#这个VLAN的COST值</span></span><br><span class="line">             Port        2 (Ethernet0/1)			<span class="comment">#RootID所用的端口</span></span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line">             <span class="comment">#Hello报文2s，最大寿命20s，转发延迟15s</span></span><br><span class="line"></span><br><span class="line">  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)	<span class="comment">#系统扩展ID就是VLAN 的序号</span></span><br><span class="line">             Address     aabb.cc00.0300							</span><br><span class="line">             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec</span><br><span class="line">             Aging Time  300 sec								<span class="comment">#网络拓扑变化时，会变成15s，快速刷新mac表</span></span><br><span class="line"></span><br><span class="line">Interface           Role  Sts     Cost      Prio.Nbr Type</span><br><span class="line">------------------- ---- --- --------- -------- --------------------------------</span><br><span class="line">Et0/0               Desg  FWD     100       128.1    Shr</span><br><span class="line">Et0/1               Root  FWD     100       128.2    Shr</span><br><span class="line">Et0/2               Altn  BLK     2         128.3    Shr</span><br><span class="line">Et0/3               Desg  FWD     100       128.4    Shr</span><br><span class="line">接口				   角色 端口状态  Cost值   优先级.序号 类型</span><br></pre></td></tr></table></figure>





<p>生成树中的端口状态</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Disabled</td>
<td>不收发任何报文</td>
</tr>
<tr>
<td>Blocking</td>
<td>不接受也不转发帧，接受但不发送BPDU，不学习MAC地址</td>
</tr>
<tr>
<td>Listening</td>
<td>不接受也不转发帧，接受并且发送BPDU，不学习MAC地址</td>
</tr>
<tr>
<td>Learning</td>
<td>不接受也不转发帧，接受并且发送BPDU，学习MAC地址</td>
</tr>
<tr>
<td>Forwarding</td>
<td>接收并转发帧，接受并且发送BPDU，学习MAC地址</td>
</tr>
</tbody></table>
<p>状态转换：</p>
<img src="http://q5q3e2ctx.bkt.clouddn.com/switch_3.png" alt="image-20200227161444047" style="zoom:50%;" />


<h2 id="实验现象"><a href="#实验现象" class="headerlink" title="实验现象"></a>实验现象</h2><p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_4.png" alt="image-20200209154918120"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">R6 ping R7</span><br><span class="line"></span><br><span class="line">原本sw4的e0/3没有连接sw1的e0/3，现在将他们连接起来。此时，链路会有30s的不通，这是spanning-tree协议工作：</span><br><span class="line">原本的路由是R6 -- SW4 -- SW3 -- SW2 --SW1 --R7</span><br><span class="line">现在SW4和SW1连通，造成了SW3的e0/2接口发生了阻断BLK。</span><br><span class="line">路由路线变为：R6 -- SW4 -- SW1 -- R7</span><br><span class="line">SW4的e0/3接口从LIS -- LRN -- FWD需要30s的时间，所以30sping不通。</span><br><span class="line"></span><br><span class="line">然后将sw4的e0/3 shutdown ,SW3发现没有BPDU出现了，进入Lost BPDU Max age=20s，20sBPDU不出现，然后进入Listening（15s）和Learning（15s），一共恢复需要30s。</span><br></pre></td></tr></table></figure>







<h2 id="生成树拓扑变化"><a href="#生成树拓扑变化" class="headerlink" title="生成树拓扑变化"></a>生成树拓扑变化</h2><p>也叫STP 拓扑变化。</p>
<img src="http://q5q3e2ctx.bkt.clouddn.com/switch_5.png" alt="image-20200209091346870" style="zoom:50%;" />

<p>Topology Change Notification Bridge Protocol Data Unit = TCN BPDU</p>
<p>网络拓扑变更报文  网桥协议单元，即当下层交换机拓扑发生变化时，次级交换机向Root Bridge传递TCN BPDU报文，即BPDU字段中的Type改为80。沿着根端口就可以最终把报文传送给Root，Root接收到后，发送TC标志设置，内容为空，目的是为了泛洪。</p>
<img src="http://q5q3e2ctx.bkt.clouddn.com/switch_6.png" alt="image-20200209091358909" style="zoom:50%;" />

<p>35s = age老化时间（20s） +  Learning（15s）[生成树的计算时间]</p>
<h2 id="Portfast：快速端口"><a href="#Portfast：快速端口" class="headerlink" title="Portfast：快速端口"></a>Portfast：快速端口</h2><p>一个接口从开启到能正常运行会经历三个阶段，需要一定的时间。这是为了防止环路。如果不需要防环，可以使用Portfast来快速启动，这样已启动就变成FWD。</p>
<p>配置命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree portfast</span><br></pre></td></tr></table></figure>





<h2 id="PVST-：Peer-Vlan-Spanning-Tree-Plus"><a href="#PVST-：Peer-Vlan-Spanning-Tree-Plus" class="headerlink" title="PVST+：Peer Vlan Spanning-Tree Plus"></a>PVST+：Peer Vlan Spanning-Tree Plus</h2><p>每个VLAN都有一个生成树，Cisco私有。</p>
<p>Cisco Catalyst交换机的MAC地址池最多可以容纳1024个地址，交换机的型号决定了可用MAC的数目，并不是所有catalyst交换机都能支持到这么多个MAC</p>
<p>这些MAC地址作为VLAN生成树中的网桥ID的MAC地址部分，不同交换机型号支持不同的可用MAC地址数目，交换机依照次序分配MAC地址</p>
<p><code>show run int | include bia</code>可以看到所有的MAC，其中第一个MAC将被生成树使用，也就是CPU的MAC，接下去就是每个以太网接口的MAC</p>
<p>我们知道交换机能够支持的VLAN数据是很庞大的，如果开启PVST+，每个VLAN一棵生成树，而每棵生成树都要有一个独立的标识，都需要耗费MAC的话，那么MAC地址池肯定是无法承受的</p>
<p>因此需要用到MAC地址缩减方案，这也是为什么优先级必须是4096倍数的原因。</p>
<img src="http://q5q3e2ctx.bkt.clouddn.com/switch_7.png" alt="image-20200227162938052" style="zoom:33%;" />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">show spanning-tree</span><br><span class="line"></span><br><span class="line">Priority 4097 (priority 4096 sys-id-ext 1)</span><br><span class="line"><span class="comment">#因为系统扩展ID是1，所以优先级要+1</span></span><br><span class="line"><span class="comment">#系统扩展ID=1是因为VLAN是1</span></span><br></pre></td></tr></table></figure>

<p>实验：</p>
<ul>
<li>VLAN 10,20 SW1为Root</li>
<li>VLAN 30,40 SW2为Root</li>
</ul>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_8.png" alt="image-20200209092821283"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show spanning-tree										<span class="comment">#查看生成树的状态</span></span><br><span class="line">spanning-tree vlan 1 priority 4096						<span class="comment">#修改PVST+的优先级</span></span><br><span class="line">spanning-tree vlan 10,20 root primary 					<span class="comment">#将vlan10,20的优先级比当前环境下最小的优先级低两个档次</span></span><br><span class="line">spanning-tree vlan 10,20 root primary 					<span class="comment">#将vlan10,20的优先级比当前环境下最小的优先级低一个档次</span></span><br></pre></td></tr></table></figure>





<h1 id="快速生成树"><a href="#快速生成树" class="headerlink" title="快速生成树"></a>快速生成树</h1><p>由于生成树的速度过慢，一般会采用快速生成树。数据中心不会使用生成树，而是大二层的结构，但园区网还是会用到生成树。下面介绍两种快速生成树，一种是Cisco私有的RSTP，一种是公开的MSTP。</p>
<h2 id="RSTP：Rapid-Spanning-Tree-Protocol"><a href="#RSTP：Rapid-Spanning-Tree-Protocol" class="headerlink" title="RSTP：Rapid Spanning Tree Protocol"></a>RSTP：Rapid Spanning Tree Protocol</h2><p>特点：</p>
<ul>
<li>802.1W</li>
<li>端口角色：根端口、指定端口、替代端口、备份端口</li>
<li>端口状态：转发、丢弃、学习</li>
<li>在Cisco Catalyst交换机上，PVST+是基于RSTP实现的perVLAN版本</li>
</ul>
<p>配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree mode rapid-pvst			<span class="comment">#BPDU的速度又多了快这个生成树就有多快</span></span><br></pre></td></tr></table></figure>



<img src="http://q5q3e2ctx.bkt.clouddn.com/switch_9.png" alt="image-20200209162727580"  />



<h2 id="MSTP：Multiple-Spanning-Tree-Protocol"><a href="#MSTP：Multiple-Spanning-Tree-Protocol" class="headerlink" title="MSTP：Multiple Spanning Tree Protocol"></a>MSTP：Multiple Spanning Tree Protocol</h2><p>集成了RSTP的优点，每实例一个生成树，PVSTP是每个vlan一颗生成树。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree mst configuration</span><br><span class="line">instance 1 vlan 10,20		<span class="comment"># 创建实例，并把vlan10，20归入实例1</span></span><br><span class="line">instance 2 vlan 30,40</span><br><span class="line">show pending</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置优先级，系统扩展id变为实力号Instance.Nbr</span></span><br><span class="line">SW1</span><br><span class="line">spanning-tree mst 1 root primary		</span><br><span class="line">spanning-tree mst 2 root secondary</span><br><span class="line"></span><br><span class="line">SW2</span><br><span class="line">spanning-tree mst 1 root secondary</span><br><span class="line">spanning-tree mst 2 root primary</span><br></pre></td></tr></table></figure>





<h1 id="生成树补丁"><a href="#生成树补丁" class="headerlink" title="生成树补丁"></a>生成树补丁</h1><p>Spanning-tree Patch，主要有六种生成树补丁，针对解决生成树反应慢、出差错、及故障检测。</p>
<h2 id="1、BPDUGuard"><a href="#1、BPDUGuard" class="headerlink" title="1、BPDUGuard"></a>1、BPDUGuard</h2><p>该接口在手都BPDU报文后，会立即切换到err-disable状态,把接口down了，常搭配portfast特性在接口上一起使用，用于连接主机，可在接口模式上激活，也可在全局模式上配置，两者有所不同。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree bpduguard <span class="built_in">enable</span> 							<span class="comment"># 接口</span></span><br><span class="line">spanning-tree portfast bpduguard default				<span class="comment"># 全局</span></span><br><span class="line">show err recov											<span class="comment"># 查看状态</span></span><br></pre></td></tr></table></figure>



<h2 id="2、BPDUFilter"><a href="#2、BPDUFilter" class="headerlink" title="2、BPDUFilter"></a>2、BPDUFilter</h2><p>一旦收到BPDU，就把接口上的Portfast删除。相当于可以智能判断是PC还是Switch。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree portfast bpdufilter default 				<span class="comment"># 全局</span></span><br><span class="line">spanning-tree bpdufilter <span class="built_in">enable</span>							<span class="comment"># 接口</span></span><br></pre></td></tr></table></figure>



<h2 id="3、UplinkFast"><a href="#3、UplinkFast" class="headerlink" title="3、UplinkFast"></a>3、UplinkFast</h2><p>当唯一的根端口Down，立刻切换到转发状态 ，跳过了LIS和LER的30s延时,但还有20s的max age 。所有配置了Uplink的交换机，都会把自己的优先级升高、COST值增加3000，防止自己成为ROOT。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree  uplinkfast</span><br></pre></td></tr></table></figure>





<h2 id="4、BackboneFast"><a href="#4、BackboneFast" class="headerlink" title="4、BackboneFast"></a>4、BackboneFast</h2><p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_10.png" alt="image-20200209185752441"></p>
<p>在部署了Backbone Fast后，SW3一旦收到SW2发送来的次优BPDU，会立即进行一系列的步骤以重新计算根端口，SW3会从跟端向根桥发送RLQ请求</p>
<p>Root SW1收到RLQ请求，立刻以RLQ响应进行恢复，以告知自己仍然存活</p>
<p>SW3立刻老化掉存储在Fae0/3上的BPDU，端口Fa0/3进入Listening状态开始发送BPDU</p>
<p>SW2从SW3收到BPDU，经过计算得出自己的Fa0/2为根端口</p>
<p>相当于去掉了20s BLK状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree backbonefast</span><br></pre></td></tr></table></figure>



<h2 id="5、RootGuard"><a href="#5、RootGuard" class="headerlink" title="5、RootGuard"></a>5、RootGuard</h2><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_11.png" alt="image-20200209185915776" style="zoom:67%;" />

<p>只要Service-Provider Network端收到其他地方发来的更优质的BPDU，就将那个区域置为inconsistent。注意inconsistent跟err-disable的区别是，err-disable会disable整个接口，而inconsistentport是针对特定的vlan的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">只会屏蔽当前VLAN(发给我更优的BPDU)</span><br><span class="line">spanning-tree guard root			<span class="comment"># 接口上配置root防护，这个端口就不可以成为根段偶</span></span><br><span class="line">show span inconsistentport 			<span class="comment"># 查看接口</span></span><br></pre></td></tr></table></figure>





<h2 id="6、LoopGuard"><a href="#6、LoopGuard" class="headerlink" title="6、LoopGuard"></a>6、LoopGuard</h2><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_12.png" alt="image-20200209191229933" style="zoom: 67%;" />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree guard loop 	<span class="comment">#接口上配置loop防护，这个端口就可以检测单向通行故障</span></span><br></pre></td></tr></table></figure>





<h1 id="单臂路由"><a href="#单臂路由" class="headerlink" title="单臂路由"></a>单臂路由</h1><p>单臂路由，路由器只有一条线连接，是三层交换机的替代品。其主要缺点就是三层交换机的优点：</p>
<ol>
<li>故障多，路由器的故障， 交换机的故障，路由器到交换机只有一条链路，单点故障</li>
<li>带宽有限，如果是三层交换机，则三层交换机中的路由器和交换机传输速率几乎无限</li>
</ol>
<p>`</p>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_13.png" alt="image-20200209192447894"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">R1</span><br><span class="line">int e0/0</span><br><span class="line">no sh</span><br><span class="line">int e0/0.10</span><br><span class="line">encapsulation dot1Q 10</span><br><span class="line">ip add 192.168.10.254 255.255.255.0</span><br><span class="line">int e0/0.20</span><br><span class="line">encapsulation dot1Q 20</span><br><span class="line">ip add 192.168.20.254 255.255.255.0</span><br><span class="line">end</span><br><span class="line">sh int e0/0.10</span><br><span class="line"></span><br><span class="line"><span class="comment">#sw</span></span><br><span class="line">int e0/1</span><br><span class="line">sw tr en <span class="keyword">do</span> </span><br><span class="line">sw mo tr</span><br><span class="line">end</span><br><span class="line"><span class="comment">#交换机还要反应一会，从LIS-LRN-FWD</span></span><br><span class="line"></span><br><span class="line">此时，R2 Ping R3</span><br></pre></td></tr></table></figure>





<h1 id="三层交换"><a href="#三层交换" class="headerlink" title="三层交换"></a>三层交换</h1><p>三层交换就相当于二层交换加了一台路由器在上面，可以实现更加灵活的网络流量路由管控。</p>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_14.png" alt="image-20200209194011387"></p>
<p>现在R2处于vlan10，R3处于vlan20，想要R2 ping通R3 ，在SW上进行配置：</p>
<p>1、 配置接口 vlan 10，添加属于R2网段额IP地址</p>
<p>2、配置接口 vlan 20， 添加属于R3网段的IP地址</p>
<p>3、在R2和R3上配置默认路由</p>
<p>4、 然后就会发现，R2可以直接ping通R3了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#SW</span></span><br><span class="line">int vlan 10						<span class="comment">#启用SVI接口，Lay3SW的交换机接口是虚拟的</span></span><br><span class="line">ip add 192.168.10.254 255.255.255.0</span><br><span class="line">no sh</span><br><span class="line">end</span><br><span class="line">sh ip int bri</span><br><span class="line"></span><br><span class="line">int vlan 20</span><br><span class="line">ip add 192.168.20.254 255.255.255.0</span><br><span class="line">no sh</span><br><span class="line">end</span><br><span class="line">sh ip int bri</span><br><span class="line"></span><br><span class="line"><span class="comment">#R，一定要记得配默认路由</span></span><br><span class="line">ip route 0.0.0.0 255.255.255.255 Ethernet0/0</span><br></pre></td></tr></table></figure>



<p>SVI(switch virtual interface) 交换虚拟接口的Line-State在以下条件满足的情况下，才会是UP</p>
<ul>
<li>SVI对应的VLAN必须在<code>vlan database</code>中存在并且是激活的——vlan存在且激活</li>
<li><code>vlan interface</code>存在并且不能是<code>down</code>状态——路由器接口up</li>
<li>必须至少有一个二层接口是UP的，而且必须是Spanning-tree的FWD状态——二层交换机接口up</li>
</ul>
<h1 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h1><ul>
<li>Dynamic Host Configuration Protocal</li>
<li>基于UDP协议端口67及68</li>
<li>bootPC：67（客户端端口号）；bootPS：68（服务端端口号）</li>
</ul>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_15.png" alt="image-20200210154539047"></p>
<p>这四条消息全部都是广播。</p>
<p>配置DHCP</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(config-if)<span class="comment"># ip dhcp pool cisico</span></span><br><span class="line">(dhcp-config)<span class="comment"># network 192.168.1.0/24</span></span><br><span class="line">(dhcp-config)<span class="comment"># default-router 192.168.1.1		# 默认路由器</span></span><br><span class="line">(dhcp-config)<span class="comment"># dns-server 114.114.114.114 114.114.115.115	# DNS</span></span><br><span class="line">(dhcp-config)<span class="comment"># lease 1		-租约时间1天</span></span><br><span class="line">(config)<span class="comment"># ip dhcp excluded-address 192.168.1.1    # 排除掉我们用的地址</span></span><br><span class="line"></span><br><span class="line">还有一种写法：1~99不分配</span><br><span class="line">ip dhcp excluded-address 192.168.1.1 192.168.1.99</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#局域网的其他设备</span></span><br><span class="line">(config)<span class="comment"># ip add dhcp</span></span><br><span class="line">  </span><br><span class="line">sh ip dhcp bingding		<span class="comment">#查看DHCP的IP地址的绑定</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#绑定IP地址</span></span><br><span class="line">ip dhcp pool R1</span><br><span class="line">host 192.168.1.10</span><br><span class="line">client-identifier [client-id]</span><br><span class="line"><span class="comment">#如果client_id已被使用，则清楚</span></span><br><span class="line">clear ip dhcp <span class="built_in">bind</span> *</span><br></pre></td></tr></table></figure>



<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_16.png" alt="image-20200210160941108"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#跨越路由器的广播DHCP请求</span></span><br><span class="line">R4是DHCP服务器，R1想要请求DHCP的广播不能跨越R3，这是可以在R3上进行配置，如果收到请求DHCP的报文，则用单播的形式将消息发送给R4</span><br><span class="line">R3</span><br><span class="line">int e0/1</span><br><span class="line">ip helper-address 192.168.34.4</span><br></pre></td></tr></table></figure>



<h1 id="链路捆绑"><a href="#链路捆绑" class="headerlink" title="链路捆绑"></a>链路捆绑</h1><p>如果直接连接两个交换机，则会因为有spanning-tree，造成无论链接多少线，都只会有一根通，从而带宽得不到提高。链路捆绑最大支持8根线绑在一起，这里只介绍二层捆绑，三层捆绑要在接口上<code>no switchport</code>，然后再配置IP地址</p>
<p>EC：需要对端交换机都配</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">int range e0/1 -2</span><br><span class="line">channel-group 1 mode on</span><br><span class="line"></span><br><span class="line">此时再看生成树，就会发现e0/1和e0/2都消失了，只留下了Po1，查看带宽，也变大了。</span><br><span class="line"></span><br><span class="line">配置Trunk</span><br><span class="line">int port-channel 1 </span><br><span class="line">sw tr en <span class="keyword">do</span> </span><br><span class="line">sw mo tr</span><br><span class="line"></span><br><span class="line">查看channel</span><br><span class="line">sh etherchannel [summary]</span><br></pre></td></tr></table></figure>



<p>修改负载均衡的方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">port-channel load-balance [] <span class="comment"># src-dst-mac</span></span><br><span class="line"><span class="comment">#二层不能用IP地址</span></span><br><span class="line">show etherchannel loadbalance</span><br></pre></td></tr></table></figure>





<h1 id="首跳冗余协议"><a href="#首跳冗余协议" class="headerlink" title="首跳冗余协议"></a>首跳冗余协议</h1><p>FHRP：first hop redundancy protocal，用于配置多个网关，配在多个朝内的接口上。常用的FHRP协议有：</p>
<ol>
<li>HSRP</li>
<li>VRRP</li>
<li>GLBP</li>
</ol>
<h2 id="HSRP"><a href="#HSRP" class="headerlink" title="HSRP"></a>HSRP</h2><p>其中以VRRP最常见，HSRP是Cisco私有的，GLBP有Bug。</p>
<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_17.png" alt="image-20200210170625634"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@不让R2和R3建立邻居</span><br><span class="line">R2<span class="comment"># passive-interface e0/1</span></span><br><span class="line">R3<span class="comment"># passive-interface e0/1 </span></span><br><span class="line"></span><br><span class="line">@配置网关,R4网关指向的地址不存在</span><br><span class="line">R4<span class="comment"># ip route 0.0.0.0 0.0.0.0 192.168.1.254</span></span><br><span class="line"></span><br><span class="line">@在R2,R3上配置standby ip 监听一个虚拟的IP</span><br><span class="line">int e0/1</span><br><span class="line">standby 1 ip 192.168.1.254</span><br><span class="line"></span><br><span class="line">sh standby brief 	<span class="comment">#查看standby的缩略信息</span></span><br><span class="line"></span><br><span class="line">- standby 会向组播地址发送信息</span><br><span class="line">- R2、R3会发现彼此，通过IP地址选出一个人来做网关</span><br><span class="line"></span><br><span class="line"><span class="comment">#上图是交换机，实际上交换机不行，需要换成集线器</span></span><br></pre></td></tr></table></figure>



<p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_18.png" alt="image-20200210171831381"></p>
<p>这个IP地址是规定死的，最后一位表示standby 1 </p>
<p>HSRP状态机</p>
<table>
<thead>
<tr>
<th>State</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Initial</td>
<td>初始化接口状态，当接口UP时，或者某些配置变更时会有的状态</td>
</tr>
<tr>
<td>Learn</td>
<td>接口未设定虚拟IP（但激活了HSRP，用standby ip），等待从Active路由器学习到该组的虚拟IP</td>
</tr>
<tr>
<td>Listen</td>
<td>路由器已经获知虚拟IP，开始侦听其他同组HSRP路由器的HELLO消息</td>
</tr>
<tr>
<td>Speak</td>
<td>发送周期性的Hello消息同时参与Active/Standby选举</td>
</tr>
<tr>
<td>Standby</td>
<td>成为Standby路由器，同时周期性的发送Hello，持续侦听Active路由器的Hello消息，以便在其失效后接替位置</td>
</tr>
<tr>
<td>Active</td>
<td>成为Active路由器，响应PC对于虚拟IP的ARP请求，同时周期性发送Hello消息，宣告自己的存货状态。</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(config-if)<span class="comment"># standby 1 preempt		#打开抢占</span></span><br><span class="line">(config-if)<span class="comment"># standby 1 priority 110	#调高优先级</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@有一种情形</span><br><span class="line">@R2的上游支路shutdown了，但是因为R2的优先级比R3大，R4发包还是选择R2，但是却不能ping通R4</span><br><span class="line">---</span><br><span class="line">@如果R2上面的接口shutdown，则把R2的优先级降低20，这样Standby就被R3抢走</span><br><span class="line">(config)<span class="comment"># track 1 interface e0/0 line-protocol		#在接口的协议上设置一个追踪 </span></span><br><span class="line">(config)<span class="comment"># int e0/1							</span></span><br><span class="line">(config-if)<span class="comment"># standby 1 track 1 decrement 20			#如果接口shutdown，则将优先级-20，会在show standby上显示详细条目</span></span><br></pre></td></tr></table></figure>







<h2 id="VRRP"><a href="#VRRP" class="headerlink" title="VRRP"></a>VRRP</h2><p>VRRP和HSRP不一样的地方</p>
<ul>
<li>在Cisco上抢占模式不一样，VRRP默认开启</li>
<li>MAC地址不一样，就是开头的固定格式不一样</li>
<li>Hello包发送的周期不一样，HSRP是3s-10s，而VRRP 1s一个Hello包，3s收不到就挂了</li>
<li>激活的状态不一样，一个是backup，一个是active，其他地方一样</li>
</ul>
<h2 id="GLBP"><a href="#GLBP" class="headerlink" title="GLBP"></a>GLBP</h2><p><img src="http://q5q3e2ctx.bkt.clouddn.com/switch_19.png" alt="image-20200210175204079"></p>
<p>AVG生成一堆虚拟的mac地址分发给局域网里面的路由器（假设有路由器A、B、C），此时有PC1来请求mac地址上网(这个mac地址是默认网关的mac，不是pc自己的mac)，AVG会挑选一台路由器B给它，又有PC2来请求上网，AVG挑选路由器C给它，又有PC3，路由器把A给它。如果路由器B坏了，则重新分配给其他路由器，如果AVG坏了，则路由器重新选举新的AVG。IP地址大则为AVG</p>
<p>所以GLBP抢占的是AVG，而其他的则是抢占干活的机会。</p>
<p>GLBP、VRRP、HSRP配置命令都差不多。</p>
</div></div><div class="nextinfo"><p>上一篇：<a href="../../../03/02/Mysql%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5/">Mysql常用语句</a></p><p>下一篇：<a href="../../24/Ansible/">Ansible</a></p></div><div class="news_pl"><div id="comment_container"></div>
<link rel="stylesheet" href="../../../../https:/imsun.github.io/gitment/style/default.css">

<script src="../../../../https:/imsun.github.io/gitment/dist/gitment.browser.js"></script>

<script src="../../../../js/md5.min.js"></script>
<script>var gitment = new Gitment({
    id: md5("2020/02/27/Switch交换机/"), // 可选。默认为 location.href
    owner: 'ArchKS',
    repo: 'https://github.com/ArchKS/ArchKS.github.io',
    oauth: {
        client_id: '18a9a2412333d2ad8676',
        client_secret: 'e433800c05981a0c741785ef6a7883eb8b0cb48a',
    },
})
gitment.render('comment_container')</script></div></div></div></main><aside class="r_box"><div class="card box"><h2>我的名片</h2><div class="box_con"><p>邮箱：2212585023@qq.com</p>
</div></div><div class="category box"><h2>文章分类</h2><div class="box_con"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/Linux/">Linux</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E5%AE%B9%E5%99%A8/">容器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%85%E9%9A%9C/">故障</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%BC%96%E7%A8%8B/">编程</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%B7%AF%E7%94%B1%E6%8A%80%E6%9C%AF/">路由技术</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%BF%90%E7%BB%B4/">运维</a><span class="category-list-count">1</span></li></ul></div></div></aside></article><footer><section class="footer_bottom"><div class="footer_container"><p class="copyright">Design by
<a href='http://ymlog.cn' target='_blank'>ZEN</a>
苏ICP备19049121号-1
</p><ul class="social_network"></ul></div></section></footer><div class="cd-top"><i class="iconfont icon-top"></i></div>
<script src="../../../../js/jquery.min.js"></script>
<script src="../../../../js/scrollreveal.js"></script>
<script src="../../../../js/hc-sticky.js"></script>
<script src="/js/canvas-nest.js" type="text/javascript" color="47,135,193" opacity="0.7" zIndex="-2" count="199"></script><script src="https://cdn.bootcss.com/highlight.js/9.15.9/highlight.min.js"></script><script src="https://cdn.bootcss.com/highlight.js/9.15.9/languages/java.min.js"></script><script src="https://cdn.bootcss.com/highlight.js/9.15.9/languages/javascript.min.js"></script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="../../../../js/common.js?v=202006181108.js"></script>
<script src="../../../../js/index.js?v=202006181108.js"></script>
</body></html>