<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8" >
    <meta name="baidu-site-verification" content="dIcXMeY8Ya" />
    
    <title>Mysql常用语句 | zen&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" >
    <meta name="keywords" content="zen, 运维, 云计算" >
    <meta name="description" content="杜振铨的博客小岛" >

    
    <link rel="alternative" href="/atom.xml" title="zen&#39;s blog" type="application/atom+xml" >
    
    
    <link rel="shortcut icon" href="../../../../favicon.ico" >
    
    
<link rel="stylesheet" href="../../../../css/style.css">

    <!--[if lt IE 9]>
    
<script src="../../../../js/html5.js"></script>

    <![endif]-->
    
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d5ebf515ab530cfbdda5f5c85093fb41";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<meta name="generator" content="Hexo 4.2.0"></head>

<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/" target="_blank" rel="noopener">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="../../../../index.html">
                <div class="cover">
                    <span class="name">zen&#39;s blog</span>
                    <span class="description"></span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="" class="item ">
                <a href="../../../../index.html" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="" class="item ">
                <a href="../../../../lab/" title="这是个BUG" class="icon-lab">&nbsp;这是个BUG</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/archks" target="_blank">Github</a>
                        |
                    
                        <a href="https://pages.coding.me" target="_blank">Hosted by Coding Pages</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="https://www.yuque.com/u174775" class="sinaweibo" target="_blank"><b>■</b> 语雀</a>
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        博客
                        <span class="popover">
                            <img src="../../../../img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/jelon.jpg" alt="avatar" title="Jelon" >
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章页 -->
<!-- 文章 -->
<article class="post article">
    <header class="text-center">
        <h3 class="post-title"><span>Mysql常用语句</span></h3>
    </header>
    <p class="post-meta text-center">
        Jelon 发表于
        <time datetime="2020-03-02T04:55:14.000Z">2020-03-02</time>
    </p>
    <div class="post-content">
        <p>世味年来薄似纱，谁令骑马客京华。<br>小楼一夜听春雨，深巷明朝卖杏花。<br>矮纸斜行闲作草，晴窗细乳戏分茶。<br>素衣莫起风尘叹，犹及清明可到家。</p>
<a id="more"></a>

<h1 id="Init初始"><a href="#Init初始" class="headerlink" title="Init初始"></a>Init初始</h1><p>安装和创建授权用户</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看是否已经安装</span></span><br><span class="line">rpm -qa mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装mysql和服务端</span></span><br><span class="line">yum -y install mariadb-server mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启mysql进程</span></span><br><span class="line">systemctl start mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化mysql，主要是创建root用户的密码，如果没有这步，root密码为空</span></span><br><span class="line">mysql_secure_installation</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建用户</span></span><br><span class="line">create user <span class="string">'username'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'userpasswd'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 授权用户</span></span><br><span class="line">grant all privileges on *.* to <span class="string">'username'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建用户并授权,并授权指定数据库下所有表,而非所有数据库</span></span><br><span class="line">grant all on dbname.* to <span class="string">'username'</span>@<span class="string">'localhost'</span> identified by <span class="string">'userpasswd'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除用户</span></span><br><span class="line">drop user <span class="string">'username'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新mysql系统权限相关表</span></span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示当前用户</span></span><br><span class="line">select user();</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有用户</span></span><br><span class="line">select User, Host, Password FROM mysql.user;</span><br></pre></td></tr></table></figure>



<h1 id="DB-SQL"><a href="#DB-SQL" class="headerlink" title="DB_SQL"></a>DB_SQL</h1><p>数据库的库语句，包括数据库的创建，删除，字符集等。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看当前MySQL中有哪些数据库</span></span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看选中数据库详情</span></span><br><span class="line">show create database &lt;db_name&gt;\G</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据库</span></span><br><span class="line">create databases &lt;db_name&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用数据库</span></span><br><span class="line">use &lt;db_name&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除数据库</span></span><br><span class="line">drop database &lt;db_name&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置字符集</span></span><br><span class="line">create database &lt;db_name&gt; default charset <span class="string">'utf8'</span>;</span><br></pre></td></tr></table></figure>



<h1 id="TB-SQL"><a href="#TB-SQL" class="headerlink" title="TB_SQL"></a>TB_SQL</h1><p>表语句包括创建表、删除表、查看表以及定义表中字段的属性。其中定义表中字段属性往往比创建表更值得研究。</p>
<p>表语句</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 首先还是解决一下创建表时常见的字符集问题</span></span><br><span class="line">create  table  tableName</span><br><span class="line">(...)DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建表 </span></span><br><span class="line">create table tb_name(...);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看表</span></span><br><span class="line">show tables;</span><br><span class="line">show table status like <span class="string">'&lt;tb_name&gt;'</span>\G</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除表</span></span><br><span class="line">drop tables &lt;tb_name&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改表</span></span><br><span class="line">alter table &lt;old_name&gt; rename &lt;new_name&gt;</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MariaDB [demo]&gt; DESC myt7;</span><br><span class="line">+<span class="comment">-------+----------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+----------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sex   | char(10) | YES  |     | man     |                |</span><br><span class="line">+<span class="comment">-------+----------+------+-----+---------+----------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    NULL：是否可以存储NULL值</span></span><br><span class="line"><span class="comment">    Key：是否已经编制索引，PRI表示该列是主键的一部分；UNI表示该列是UNIQUE索引的一部分，NULL表示在列中某个给定值允许出现多次</span></span><br><span class="line"><span class="comment">    Default：表示该列是否有默认值</span></span><br><span class="line"><span class="comment">    Extra：获取该列的附加信息</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<p>实例</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">//查询后删除表</span><br><span class="line">MariaDB [demo]&gt; select group_concat(table_name) from information_schema.tables where table_schema='demo';</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| group_concat(table_name)   |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| fruits,sping,suppliers,x,y |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">tables</span> fruits,sping,suppliers,x,y;</span><br></pre></td></tr></table></figure>





<p>字段</p>
<p>1、SQL主键的六种约束</p>
<table>
<thead>
<tr>
<th>名称</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td>PRIMARY KEY</td>
<td align="left">主键约束，记录唯一标识，主键自动拥有not null及 unique约束</td>
</tr>
<tr>
<td>NOT NULL</td>
<td align="left">非空约束，强制字段有值</td>
</tr>
<tr>
<td>UNIQUE</td>
<td align="left">唯一约束，该字段值必须唯一</td>
</tr>
<tr>
<td>FOREIGN KEY</td>
<td align="left">外键，预防破坏表之间的连接行为，防止非法数据插入外键列</td>
</tr>
<tr>
<td>CHECK</td>
<td align="left">限制列的取值范围</td>
</tr>
<tr>
<td>DEFAULT</td>
<td align="left">设置默认值</td>
</tr>
<tr>
<td>AUTO_INCREMENT</td>
<td align="left">自动增加字段，且字段类型必须为整型主键一部分</td>
</tr>
</tbody></table>
<p>实例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> my1( </span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> ,</span><br><span class="line">    sex <span class="built_in">char</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'m'</span> </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">2</span><br><span class="line">//主键约束</span><br><span class="line"><span class="keyword">create</span>  <span class="keyword">table</span> myt3( </span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    salary <span class="built_in">FLOAT</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span>(<span class="keyword">name</span>,salary)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">3</span><br><span class="line">//外键约束</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	外键表：即当前这张表</span></span><br><span class="line"><span class="comment">	主键表：mainTable</span></span><br><span class="line"><span class="comment">	绑定的主键：main_key_name</span></span><br><span class="line"><span class="comment">	绑定的外键：foreign_key_name</span></span><br><span class="line"><span class="comment">	绑定名称：foreign_name</span></span><br><span class="line"><span class="comment">	constraint ： 约束</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">constraint (foreign_name) foreign key(foreign_key_name) references mainTable(main_key_name)</span><br></pre></td></tr></table></figure>



<p>修改字段语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改字段类型和字段名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">change</span> &lt;old_field&gt; &lt;new_field&gt; <span class="built_in">INT</span>(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改字段的类型和字段名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">add</span> &lt;new_field&gt; <span class="built_in">INT</span>(<span class="number">15</span>) <span class="keyword">AFTER</span>|<span class="keyword">FIRST</span> &lt;<span class="keyword">field</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">drop</span> &lt;<span class="keyword">field</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改字段的排列位置</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">modify</span> &lt;f1&gt; <span class="keyword">type</span> <span class="keyword">FIRST</span>|<span class="keyword">AFTER</span> &lt;f2&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改字段的数据类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">modify</span> &lt;<span class="keyword">field</span>&gt; <span class="built_in">INT</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改存储引擎</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">engine</span>=&lt;en_name&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除外键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;tb_name&gt; <span class="keyword">drop</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> 外键约束名;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除没有关联的表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> &lt;tb1&gt;,&lt;tb2&gt;;</span><br></pre></td></tr></table></figure>



<p>总结：</p>
<blockquote>
<p>change用来修改KEY本身</p>
<p>modify则修改KEY的属性</p>
<p>后面直接和定义语法一样，千万别忘了后面的类型，如…INT(11)，不然会报错</p>
<p>FIRST：将字段设置为表的第一个字段</p>
<p>AFTER：将新添加的字段添加到指定字段的后面</p>
</blockquote>
<p>实例</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">删除两个有关联的表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> pt(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) PRIMARY <span class="keyword">KEY</span>,<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subt(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    depId <span class="built_in">int</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_name <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (depId) <span class="keyword">REFERENCES</span> pt(<span class="keyword">id</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    不能直接 drop pt，但可以直接删除subt</span></span><br><span class="line"><span class="comment">    先解除关联，再删除主表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> <span class="keyword">alter</span> <span class="keyword">table</span> subt <span class="keyword">drop</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> fk_name;</span><br><span class="line"> <span class="keyword">drop</span>  <span class="keyword">table</span> pt;</span><br></pre></td></tr></table></figure>



<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><p>insert</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 两种数值插入的方式</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> &lt;tb_name&gt; (coloumn_list) <span class="keyword">VALUES</span> (value_list);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> &lt;tb_name&gt; <span class="keyword">VALUES</span> (value_list);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将查询到的结果插入</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span>  table1 (coloumn_list) <span class="keyword">select</span> (coloumn_list) <span class="keyword">from</span>  table2 <span class="keyword">WHERE</span> (condition);</span><br><span class="line"></span><br><span class="line">for example</span><br><span class="line">MariaDB [demo]&gt; insert into my1</span><br><span class="line">    -&gt; select id,name,age from my2 WHERE id&gt;2;</span><br></pre></td></tr></table></figure>



<p>update</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> &lt;tb_name&gt; <span class="keyword">SET</span> column_name1=value1,column_name2=value2,.... <span class="keyword">WHERE</span> condition;</span><br></pre></td></tr></table></figure>



<p>delete</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">from</span> &lt;tb_name&gt; [<span class="keyword">WHERE</span> condition];</span><br><span class="line">/如果没有WHERE，则删除表中所有记录。</span><br></pre></td></tr></table></figure>





<h1 id="NB-select"><a href="#NB-select" class="headerlink" title="NB.select"></a>NB.select</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span>  字段<span class="number">1</span>，字段<span class="number">2</span>，字段<span class="number">3.</span>..</span><br><span class="line">-&gt; <span class="keyword">from</span> [表<span class="number">1</span>],[表<span class="number">2</span>]... 				   //数据来源</span><br><span class="line">-&gt; <span class="keyword">WHERE</span> 表达式 						  //查询的条件</span><br><span class="line">-&gt; <span class="keyword">GROUP</span> <span class="keyword">BY</span> (<span class="keyword">group</span> <span class="keyword">by</span> definition) 		//如何显示查询数据，按照指定字段分组</span><br><span class="line">-&gt; <span class="keyword">HAVING</span> (expression) [(<span class="keyword">operator</span>) (expression)] </span><br><span class="line">-&gt; <span class="keyword">ORDER</span> <span class="keyword">BY</span> (<span class="keyword">order</span> <span class="keyword">by</span> definition) 		//用什么样的顺序显示查询的数据，<span class="keyword">ASC</span>(升序)、<span class="keyword">DESC</span>(降序)</span><br><span class="line">-&gt; <span class="keyword">LIMIT</span> [(<span class="keyword">offset</span>),] (<span class="keyword">row</span> <span class="keyword">count</span>) 		//限制显示条数</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;字段<span class="number">1</span>，字段<span class="number">2</span>，字段<span class="number">3</span>，...&#125;</span><br><span class="line"><span class="keyword">from</span> &#123;表或视图&#125;</span><br><span class="line"><span class="keyword">WHERE</span> &#123;查询条件&#125;;</span><br><span class="line">    </span><br><span class="line">过滤,排序,分组。</span><br><span class="line">排序要在过滤之后，不然报错</span><br></pre></td></tr></table></figure>



<p>数据源</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建库</span></span><br><span class="line">create database db_test default charset <span class="string">'utf8'</span>;</span><br><span class="line"><span class="comment"># 创建表</span></span><br><span class="line">create table person</span><br><span class="line">    (</span><br><span class="line">    id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">    name CHAR(20) NOT NULL,</span><br><span class="line">    book VARCHAR(50) NOT NULL,</span><br><span class="line">    dynasty VARCHAR(10) DEFAULT <span class="string">'China'</span>,</span><br><span class="line">    PRIMARY KEY(id)</span><br><span class="line">    )DEFAULT CHARSET=utf8mb4;</span><br><span class="line"><span class="comment"># 插入值    </span></span><br><span class="line">insert into person (name,book,dynasty) VALUES (<span class="string">'王阳明'</span>,<span class="string">'传习录'</span>,<span class="string">'ming'</span>);</span><br><span class="line">insert into person (name,book) VALUES (<span class="string">'林清玄'</span>,<span class="string">'白雪少年'</span>);</span><br><span class="line">insert into person (name,book,dynasty) VALUES (<span class="string">'孔子'</span>,<span class="string">'论语'</span>,<span class="string">'chunqiu'</span>);</span><br><span class="line">insert into person (name,book,dynasty) VALUES (<span class="string">'老子'</span>,<span class="string">'道德经'</span>,<span class="string">'chunqiu'</span>);</span><br><span class="line">insert into person (name,book,dynasty) VALUES (<span class="string">'李白'</span>,<span class="string">'蜀道难'</span>,<span class="string">'tang'</span>);</span><br><span class="line">insert into person (name,book,dynasty) VALUES (<span class="string">'陈子昂'</span>,<span class="string">'登幽州台歌'</span>,<span class="string">'tang'</span>);</span><br><span class="line"><span class="comment"># 查看插入的值</span></span><br><span class="line">select * from person;</span><br></pre></td></tr></table></figure>



<img src="http://q5q3e2ctx.bkt.clouddn.com/mysql_1_data.png" alt="image-20200302153805396" style="zoom:67%;" />



<p>简单查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MariaDB [nikitest]&gt; select id,name,book,dynasty from person where id in (01,02,06) AND dynasty='tang';</span><br><span class="line">+<span class="comment">----+-----------+-----------------+---------+</span></span><br><span class="line">| id | name      | book            | dynasty |</span><br><span class="line">+<span class="comment">----+-----------+-----------------+---------+</span></span><br><span class="line">|  6 | 陈子昂    | 登幽州台歌      | tang    |</span><br><span class="line">+<span class="comment">----+-----------+-----------------+---------+</span></span><br></pre></td></tr></table></figure>



<p>别名查询</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">MariaDB [nikitest]&gt; select id as ID,name as NAME,book as BOOK,dynasty as DYNASTY  from person as f where f.id &lt; 5;</span><br><span class="line">+<span class="comment">----+-----------+--------------+---------+</span></span><br><span class="line">| ID | NAME      | BOOK         | DYNASTY |</span><br><span class="line">+<span class="comment">----+-----------+--------------+---------+</span></span><br><span class="line">|  1 | 王阳明    | 传习录       | ming    |</span><br><span class="line">|  2 | 林清玄    | 白雪少年     | China   |</span><br><span class="line">|  3 | 孔子      | 论语         | chunqiu |</span><br><span class="line">|  4 | 老子      | 道德经       | chunqiu |</span><br><span class="line">+<span class="comment">----+-----------+--------------+---------+</span></span><br><span class="line"></span><br><span class="line">//即将字段以别名显示，同时将表也以表明显示（这里用的是f-&gt;person，所以条件查询f下的字段就可以写成f.id)</span><br></pre></td></tr></table></figure>



<p>排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">//单列排序，DESC反序</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DISTINCT</span> <span class="keyword">id</span>,<span class="keyword">name</span>,book, dynasty <span class="keyword">from</span> person <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">//多列排序，先按照朝代排序，相同朝代的再按照名称排序</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DISTINCT</span> <span class="keyword">id</span>,<span class="keyword">name</span>,book, dynasty <span class="keyword">from</span> person <span class="keyword">order</span> <span class="keyword">by</span> dynasty <span class="keyword">DESC</span>,<span class="keyword">name</span>;</span><br></pre></td></tr></table></figure>



<p>分组</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">//同类分为一组，通过GROUP_CONCAT(field)显示详细信息</span><br><span class="line">&gt; select group_concat(name),dynasty from person group by dynasty;</span><br><span class="line">+<span class="comment">--------------------+---------+</span></span><br><span class="line">| GROUP_CONCAT(name) | dynasty |</span><br><span class="line">+<span class="comment">--------------------+---------+</span></span><br><span class="line">| 林清玄             | China   |</span><br><span class="line">| 孔子,老子          | chunqiu |</span><br><span class="line">| 王阳明             | ming    |</span><br><span class="line">| 李白,陈子昂        | tang    |</span><br><span class="line">+<span class="comment">--------------------+---------+</span></span><br></pre></td></tr></table></figure>



<p>过滤</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">//查看同一时代的人，过滤出人数&gt;1的</span><br><span class="line">&gt; select group_concat(name), dynasty from person group by dynasty having count(dynasty)&gt;1;</span><br><span class="line">+<span class="comment">--------------------+---------+</span></span><br><span class="line">| group_concat(name) | dynasty |</span><br><span class="line">+<span class="comment">--------------------+---------+</span></span><br><span class="line">| 孔子,老子          | chunqiu |</span><br><span class="line">| 李白,陈子昂        | tang    |</span><br><span class="line">+<span class="comment">--------------------+---------+</span></span><br></pre></td></tr></table></figure>



<p>限制</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">//限制显示结果为 offset &amp; count</span><br><span class="line">&gt; select * from person limit 2;</span><br><span class="line">+<span class="comment">----+-----------+--------------+---------+</span></span><br><span class="line">| id | name      | book         | dynasty |</span><br><span class="line">+<span class="comment">----+-----------+--------------+---------+</span></span><br><span class="line">|  1 | 王阳明    | 传习录       | ming    |</span><br><span class="line">|  2 | 林清玄    | 白雪少年     | China   |</span><br><span class="line">+<span class="comment">----+-----------+--------------+---------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">//限制显示<span class="number">2</span>个结果，并从第<span class="number">4</span>个开始显示，这里设置了偏移位=<span class="number">4</span></span><br><span class="line">&gt; <span class="keyword">select</span> * <span class="keyword">from</span> person <span class="keyword">limit</span> <span class="number">3</span>,<span class="number">2</span>;</span><br><span class="line">+<span class="comment">----+--------+-----------+---------+</span></span><br><span class="line">| id | name   | book      | dynasty |</span><br><span class="line">+<span class="comment">----+--------+-----------+---------+</span></span><br><span class="line">|  4 | 老子   | 道德经    | chunqiu |</span><br><span class="line">|  5 | 李白   | 蜀道难    | tang    |</span><br><span class="line">+<span class="comment">----+--------+-----------+---------+</span></span><br></pre></td></tr></table></figure>



<h1 id="AF函数"><a href="#AF函数" class="headerlink" title="AF函数"></a>AF函数</h1><p>aggregate function，mysql内置聚合函数</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>AVG()</td>
<td>列数值均值</td>
</tr>
<tr>
<td>COUNT()</td>
<td>个数，忽略空行,COUNT(*)计算表中总行数，不忽略空行</td>
</tr>
<tr>
<td>MAX()</td>
<td>列数值最大</td>
</tr>
<tr>
<td>MIN()</td>
<td>列数值最小</td>
</tr>
<tr>
<td>SUM()</td>
<td>列数值和</td>
</tr>
</tbody></table>
<p>实例</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,<span class="keyword">name</span>,book,<span class="keyword">MAX</span>(dynasty) <span class="keyword">from</span> person;</span><br><span class="line"></span><br><span class="line">| 0111 0100 | 0164 | 116 | 0x74 | t |</span><br><span class="line">| 0110 0011 | 0143 | 99  | 0x63 | c |</span><br><span class="line">| 0110 1101 | 0155 | 109 | 0x6D | m |</span><br><span class="line">//这里t最大，所以选出来tang</span><br></pre></td></tr></table></figure>



<p>这里只介绍了基础的SQL语句，后面还有连接查询、子查询、合并查询等……..</p>

    </div>
    <p class="post-meta">
        <span class="post-cat">分类：
            <a class="cat-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
        </span>
        <span class="post-tags">
            标签：
            
    
        <a href="../../../../tags/MySQL/" title="MySQL">MySQL</a>
    

        </span>
    </p>
</article>
<!-- 分享按钮 -->

  <div class="article-share clearfix text-center">
    <div class="share-area">
      <span class="share-txt">分享到：</span>
      <a href="javascript: window.open('http://service.weibo.com/share/share.php?url=' + encodeURIComponent(location.href) + '&title=' + document.title + '&language=zh_cn');" class="share-icon weibo"></a>
      <a href="javascript: alert('请复制链接到微信并发送');" class="share-icon wechat"></a>
      <a href="javascript: window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent(location.href) + '&title=' + document.title);" class="share-icon qqzone"></a>
      <a href="javascript: window.open('http://connect.qq.com/widget/shareqq/index.html?url=' + encodeURIComponent(location.href) + '&desc=Jelon个人博客&title=' + document.title + '&callback=' + encodeURIComponent(location.href));" class="share-icon qq"></a>
      <a href="javascript: window.open('http://shuo.douban.com/!service/share?href=' + encodeURIComponent(location.href) + '&name=' + document.title + '&text=' + document.title);" class="share-icon douban"></a>
    </div>
  </div>


<!-- 上一篇/下一篇 -->

<div class="article-nav clearfix">
    
    <span class="prev fl">
        上一篇<br >
        <a href="../../28/Django_Models/">
            
                Django——Models
            
        </a>
    </span>
    

    
    <span class="next fr">
        下一篇<br >
        <a href="../../../02/27/Switch/">
            
                Switch交换机
            
        </a>
    </span>
    
</div>

<!-- 文章评论 -->


            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    
    <section class="widget">
        <h3 class="widget-hd"><strong>文章搜索</strong></h3>
        <div class="search-form">
  <form
    id="searchForm"
    method="GET"
    action="https://www.baidu.com/s"
    ectype="application/x-www-form-urlencoded"
    target="_blank"
    autocomplete="false"
    onsubmit="javascript: return false;">
    <input
      id="searchKeyword"
      type="text"
      class="form-control"
      placeholder="输入关键字搜索"
      autocomplete="false"
    />
    <input id="searchKeywordHidden" type="hidden" name="wd" />
    <input id="searchButton" class="btn" type="submit" value="搜索" />
  </form>
</div>
    </section>
    

    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="../../../../categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a>
        <span class="badge">(3)</span>
    </li>
    
    <li>
        <a href="../../../../categories/%E7%BC%96%E7%A8%8B/">编程</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="../../../../categories/%E5%AE%B9%E5%99%A8/">容器</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="../../../../categories/Linux/">Linux</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="../../../../categories/%E8%B7%AF%E7%94%B1%E6%8A%80%E6%9C%AF/">路由技术</a>
        <span class="badge">(3)</span>
    </li>
    
    <li>
        <a href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="../../../../categories/%E8%BF%90%E7%BB%B4/">运维</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="../../../../categories/%E6%95%85%E9%9A%9C/">故障</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="../../../../tags/Ansible/" title="Ansible">Ansible (1)</a>
  
    <a class="tag-item" href="../../../../tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" title="快捷键">快捷键 (6)</a>
  
    <a class="tag-item" href="../../../../tags/Django/" title="Django">Django (1)</a>
  
    <a class="tag-item" href="../../../../tags/Docker/" title="Docker">Docker (1)</a>
  
    <a class="tag-item" href="../../../../tags/history/" title="history">history (1)</a>
  
    <a class="tag-item" href="../../../../tags/KVM/" title="KVM">KVM (1)</a>
  
    <a class="tag-item" href="../../../../tags/Keepalived/" title="Keepalived">Keepalived (1)</a>
  
    <a class="tag-item" href="../../../../tags/LVS/" title="LVS">LVS (1)</a>
  
    <a class="tag-item" href="../../../../tags/Matplotlib/" title="Matplotlib">Matplotlib (1)</a>
  
    <a class="tag-item" href="../../../../tags/NodeJS/" title="NodeJS">NodeJS (1)</a>
  
    <a class="tag-item" href="../../../../tags/%E9%9A%8F%E7%AC%94/" title="随笔">随笔 (2)</a>
  
    <a class="tag-item" href="../../../../tags/OSPF%E5%8D%8F%E8%AE%AE/" title="OSPF协议">OSPF协议 (1)</a>
  
    <a class="tag-item" href="../../../../tags/Linux/" title="Linux">Linux (1)</a>
  
    <a class="tag-item" href="../../../../tags/ARP%E5%8D%8F%E8%AE%AE/" title="ARP协议">ARP协议 (1)</a>
  
    <a class="tag-item" href="../../../../tags/%E7%88%AC%E8%99%AB/" title="爬虫">爬虫 (1)</a>
  
    <a class="tag-item" href="../../../../tags/Redis/" title="Redis">Redis (1)</a>
  
    <a class="tag-item" href="../../../../tags/%E5%B0%8F%E5%9E%8B%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/" title="小型路由协议">小型路由协议 (1)</a>
  
    <a class="tag-item" href="../../../../tags/MySQL/" title="MySQL">MySQL (1)</a>
  
    <a class="tag-item" href="../../../../tags/Switch/" title="Switch">Switch (1)</a>
  
    <a class="tag-item" href="../../../../tags/VsCode/" title="VsCode">VsCode (1)</a>
  
    <a class="tag-item" href="../../../../tags/Vue/" title="Vue">Vue (1)</a>
  
    <a class="tag-item" href="../../../../tags/WebSocket/" title="WebSocket">WebSocket (1)</a>
  
    <a class="tag-item" href="../../../../tags/NFS/" title="NFS">NFS (1)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://www.ujslxw.com/" target="_blank" title="老刘的博客">老刘的博客</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2020
    

    <a href="../../../../index.html">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->

<script src="../../../../js/main.js?v=1593085600254.js"></script>

</body>
</html>