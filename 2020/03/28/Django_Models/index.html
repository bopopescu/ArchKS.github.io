<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Django——Models | zen's blog</title><meta name="description" content="念两句诗笙管本无律，清风顾盼闲。哀哀稚子意，眷眷亲人怜。岁月悲华发，流光爱少年。山中有历日，年尽不言寒。幼小便失亲，山深自本真。几行逝水泪，一片朝霞洇。或有野村梦，岂无花蕾心？春夏秋冬后，情仇过眼云。      前期准备0、首先创建一个Django项目： django-admin startproject DoModelcd DoModeldjango-admin startapp App项目框"><meta name="keywords" content="Django"><meta name="author" content="ZEN"><meta name="copyright" content="ZEN"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="../../../../img/favicon.png"><link rel="canonical" href="https://archks.github.io/2020/03/28/Django_Models/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Django——Models"><meta property="og:url" content="https://archks.github.io/2020/03/28/Django_Models/"><meta property="og:site_name" content="zen's blog"><meta property="og:description" content="念两句诗笙管本无律，清风顾盼闲。哀哀稚子意，眷眷亲人怜。岁月悲华发，流光爱少年。山中有历日，年尽不言寒。幼小便失亲，山深自本真。几行逝水泪，一片朝霞洇。或有野村梦，岂无花蕾心？春夏秋冬后，情仇过眼云。      前期准备0、首先创建一个Django项目： django-admin startproject DoModelcd DoModeldjango-admin startapp App项目框"><meta property="og:image" content="https://archks.github.io/img/post.jpg"><meta property="article:published_time" content="2020-03-28T06:42:14.000Z"><meta property="article:modified_time" content="2020-07-04T02:19:38.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="../../../../css/index.css"><link rel="stylesheet" href="../../../../https:/cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="../../../../https:/cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="Redis" href="../../../../https:/archks.github.io/2020/04/01/Redis/"><link rel="next" title="Mysql常用语句" href="../../../../https:/archks.github.io/2020/03/02/SQL/"><link rel="stylesheet" href="../../../../https:/fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: {"text":"I,LOVE,YOU","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-07-04 10:19:38'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="atom.xml" title="zen's blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="../img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="../archives/"><div class="headline">文章</div><div class="length_num">47</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="../tags/"><div class="headline">标签</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="../categories/"><div class="headline">分类</div><div class="length_num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="../index.html"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="../archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="../link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前期准备"><span class="toc-number">1.</span> <span class="toc-text">前期准备</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#更换数据库详解"><span class="toc-number">2.</span> <span class="toc-text">更换数据库详解</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#简介"><span class="toc-number">3.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MTV-MVC"><span class="toc-number">3.1.</span> <span class="toc-text">MTV&#x2F;MVC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ORM"><span class="toc-number">3.2.</span> <span class="toc-text">ORM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定义字段"><span class="toc-number">3.3.</span> <span class="toc-text">定义字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字段类型"><span class="toc-number">3.3.1.</span> <span class="toc-text">字段类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字段约束"><span class="toc-number">3.3.2.</span> <span class="toc-text">字段约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#属性"><span class="toc-number">3.4.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#增删改查"><span class="toc-number">4.</span> <span class="toc-text">增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#增"><span class="toc-number">4.1.</span> <span class="toc-text">增</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、直接实例化对象设置属性"><span class="toc-number">4.1.1.</span> <span class="toc-text">1、直接实例化对象设置属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、创建对象传入属性"><span class="toc-number">4.1.2.</span> <span class="toc-text">2、创建对象传入属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、使用Model-objects-create"><span class="toc-number">4.1.3.</span> <span class="toc-text">3、使用Model.objects.create()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、自己封装类方法创建"><span class="toc-number">4.1.4.</span> <span class="toc-text">4、自己封装类方法创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、使用Manager-中封装方法创建"><span class="toc-number">4.1.5.</span> <span class="toc-text">5、使用Manager()中封装方法创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、直接调用类方法添加数据"><span class="toc-number">4.1.6.</span> <span class="toc-text">6、直接调用类方法添加数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删"><span class="toc-number">4.2.</span> <span class="toc-text">删</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#改"><span class="toc-number">4.3.</span> <span class="toc-text">改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查"><span class="toc-number">4.4.</span> <span class="toc-text">查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取查询结果集"><span class="toc-number">4.4.1.</span> <span class="toc-text">获取查询结果集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#all"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">all</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#order-by"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">order_by</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#values"><span class="toc-number">4.4.1.4.</span> <span class="toc-text">values</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slice"><span class="toc-number">4.4.1.5.</span> <span class="toc-text">slice</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取查询条件的单个对象"><span class="toc-number">4.4.2.</span> <span class="toc-text">获取查询条件的单个对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#first"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">first</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#last"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">last</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#get"><span class="toc-number">4.4.2.3.</span> <span class="toc-text">get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exist"><span class="toc-number">4.4.2.4.</span> <span class="toc-text">exist</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询条件"><span class="toc-number">4.4.3.</span> <span class="toc-text">查询条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FQ对象"><span class="toc-number">4.4.4.</span> <span class="toc-text">FQ对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#聚合函数"><span class="toc-number">4.4.5.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#逻辑删除"><span class="toc-number">4.4.6.</span> <span class="toc-text">逻辑删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多表查询"><span class="toc-number">4.4.7.</span> <span class="toc-text">多表查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缓存集"><span class="toc-number">4.5.</span> <span class="toc-text">缓存集</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(../../../../img/post.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="../index.html">zen's blog</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="../index.html"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="../archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="../link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Django——Models</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-03-28 14:42:14"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-03-28</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-07-04 10:19:38"><i class="fas fa-history fa-fw"></i> 更新于 2020-07-04</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="../../../../categories/%E7%BC%96%E7%A8%8B/">编程</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">4.5k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 18 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><blockquote>
<p>念两句诗<br>笙管本无律，清风顾盼闲。<br>哀哀稚子意，眷眷亲人怜。<br>岁月悲华发，流光爱少年。<br>山中有历日，年尽不言寒。<br>幼小便失亲，山深自本真。<br>几行逝水泪，一片朝霞洇。<br>或有野村梦，岂无花蕾心？<br>春夏秋冬后，情仇过眼云。</p>
</blockquote>
<a id="more"></a>


<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/KCgP1Rbf6qei5Lp.png" alt="django(二) - Models.png"></p>
<h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><p>0、首先创建一个Django项目：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">django-admin startproject DoModel</span><br><span class="line">cd DoModel</span><br><span class="line">django-admin startapp App</span><br><span class="line"></span><br><span class="line">项目框架：</span><br><span class="line">-------------------------------</span><br><span class="line">G:\Django\django1.11\DoModel&gt;tree /F</span><br><span class="line">Folder PATH listing for volume tmp</span><br><span class="line">Volume serial number is 1030-3F09</span><br><span class="line">G:.</span><br><span class="line">│   manage.py</span><br><span class="line">│</span><br><span class="line">├───App	# 我们主要写代码的地方</span><br><span class="line">│   │   admin.py</span><br><span class="line">│   │   apps.py</span><br><span class="line">│   │   models.py # 和数据库交互的地方</span><br><span class="line">│   │   tests.py</span><br><span class="line">│   │   views.py # 写业务逻辑的地方</span><br><span class="line">│   │   __init__.py</span><br><span class="line">│   │</span><br><span class="line">│   └───migrations</span><br><span class="line">│           __init__.py</span><br><span class="line">│</span><br><span class="line">└───DoModel</span><br><span class="line">        settings.py</span><br><span class="line">        urls.py</span><br><span class="line">        wsgi.py</span><br><span class="line">        __init__.py</span><br></pre></td></tr></table></figure>



<p>1、在<code>DoModel/DoModel/settings.py</code>中加入应用</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line"> <span class="string">'django.middleware.security.SecurityMiddleware'</span>,</span><br><span class="line"> <span class="string">'django.contrib.sessions.middleware.SessionMiddleware'</span>,</span><br><span class="line"> <span class="string">'django.middleware.common.CommonMiddleware'</span>,</span><br><span class="line"> <span class="string">'django.middleware.csrf.CsrfViewMiddleware'</span>,</span><br><span class="line"> <span class="string">'django.contrib.auth.middleware.AuthenticationMiddleware'</span>,</span><br><span class="line"> <span class="string">'django.contrib.messages.middleware.MessageMiddleware'</span>,</span><br><span class="line"> <span class="string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span>,</span><br><span class="line"> <span class="string">'App'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<p>2、更改<code>DoModel/DoModel/settings.py</code>中的数据库为MySQL，下面会详细讲解如何更换数据库</p>
<p>3、在DoModel/urls.py中注册App的路由</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^admin/'</span>, admin.site.urls),</span><br><span class="line">    url(<span class="string">r'^app/'</span>,include(<span class="string">"App.urls"</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>





<h1 id="更换数据库详解"><a href="#更换数据库详解" class="headerlink" title="更换数据库详解"></a>更换数据库详解</h1><p>在DoModel/setting.py*中修改DATABASES设置</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">'default'</span>: &#123;</span><br><span class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">'model3'</span>,</span><br><span class="line">        <span class="string">'USER'</span>: <span class="string">'niki'</span>,</span><br><span class="line">        <span class="string">'PASSWORD'</span>: <span class="string">'123456'</span>,</span><br><span class="line">        <span class="string">'HOST'</span>: <span class="string">'121.36.70.55'</span>,</span><br><span class="line">        <span class="string">'PORT'</span>: <span class="string">'3306'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1、在MySQL上创建数据库model3, <code>create database model3;</code></p>
<p>2、添加数据库</p>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/kFOEglnX6qjv752.png" alt="django(2) - 1" style="zoom:33%;" />


<p>3、下载驱动</p>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/ZNeuG9t8Xd6WSCJ.png" alt="django(2) - 1.1" style="zoom:33%;" />

<p>4、 安装数据库驱动</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple </span><br><span class="line">pip install pymysql -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>



<p>5、伪装驱动</p>
<p>因为Django是不认pymysql的，所以需要伪装成MySQL_db</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># HelloDjango/__init__.py</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>



<p>6、执行迁移</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>可以看到Student表迁移成功：</p>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/bPALwCZhTeOV8j3.png" alt="django(2) - 1.2" style="zoom:33%;" />




<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>开发环境 Windows10</li>
<li>Python==3.5.2</li>
<li>django=1.11.7</li>
</ul>
<h2 id="MTV-MVC"><a href="#MTV-MVC" class="headerlink" title="MTV/MVC"></a>MTV/MVC</h2><p>MVC：（Model 、View、Controller）</p>
<ul>
<li><p>Model：用于封装与应用程序的业务逻辑相关的数据及对数据的处理方法，是web应用程序中用于处理应用程序的数据逻辑部分，Model通常只提供功能性的接口，通过这些接口可以获取Model的所有功能</p>
</li>
<li><p>View：负责数据的呈现，View对用户直接输出</p>
</li>
<li><p>Controller：负责从用户端收集用户输入，主要处理用户的交互</p>
</li>
</ul>
<p>MTV是从MVC演化而来，本质上和MVC一样，只是名字改了：</p>
<p>MTV：（Model、Template、View）</p>
<ul>
<li><p>Model：负责业务对象和数据库对象</p>
</li>
<li><p>View：负责业务逻辑，并在适当的时候调用Module 和 Template</p>
</li>
<li><p>Template：负责把页面展示给用户</p>
</li>
</ul>
<p>在Django中，还有url，主要用来将一个个URL页面请求分发给不同的view进行处理，View再调用相应的Model和Template。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/F9TZ12SaP6jlCYM.png" alt="django(二) - 3.png"></p>
<h2 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h2><p>ORM（Object Relation Mapping） 对象关系映射，就是把数据库也看作是一个对象，将数据库的属性映射到对象的属性和方法，目的是为了将业务逻辑和SQL语句进行解耦合：</p>
<ul>
<li>数据库的表（table） –&gt; 类（class）</li>
<li>记录（record，行数据）–&gt; 对象（object）</li>
<li>字段（field）–&gt; 对象的属性（attribute）</li>
</ul>
<p>ORM 使用对象，封装了数据库操作，因此可以不碰 SQL 语言。开发者只使用面向对象编程，与数据对象直接交互，不用关心底层数据库。</p>
<p>下面一段代码就是创建了两张表，Grade表的字段是g_grade、Student表的字段是s_name、s_password和s_grade。</p>
<p>可以看到，数据库的表对应了面向对象的类，且必须继承自models.Model这个类；字段则是对应了面向对象的属性。</p>
<p><em>/DoModel/App/models.py</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grade</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    g_grade = models.CharField(max_length=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    s_name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_password = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_grade = models.ForeignKey(Grade)</span><br></pre></td></tr></table></figure>

<p>连接数据库</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/mQ3aNuTwKHdA5IJ.png" alt="django(二）- 3.5.png"></p>
<p>映射到库中：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations # 生成迁移文件</span><br><span class="line">python manage.py migrate   # 执行迁移</span><br></pre></td></tr></table></figure>



<p>刷新数据库就可以看到App_Student和App_Grade两张表了。查看表的定义：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- auto-generated definition</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> App_student</span><br><span class="line">(</span><br><span class="line">  	<span class="keyword">id</span>         <span class="built_in">int</span> auto_increment</span><br><span class="line">    primary <span class="keyword">key</span>,</span><br><span class="line">  	s_name     <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  	s_password <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  	s_grade_id <span class="built_in">int</span>         <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  	<span class="keyword">constraint</span> App_student_s_grade_id_797e4cc7_fk_App_grade_id</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (s_grade_id) <span class="keyword">references</span> App_grade (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- auto-generated definition</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> App_grade</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span>      <span class="built_in">int</span> auto_increment</span><br><span class="line">    primary <span class="keyword">key</span>,</span><br><span class="line">  	g_grade <span class="built_in">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>





<h2 id="定义字段"><a href="#定义字段" class="headerlink" title="定义字段"></a>定义字段</h2><p>字段名不允许使用下划线，因为查询条件需要用到下划线</p>
<h3 id="字段类型"><a href="#字段类型" class="headerlink" title="字段类型"></a>字段类型</h3><table>
<thead>
<tr>
<th>字段类型</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>AutoField</td>
<td>一个根据实际ID自动增长的IntegerField，通常不指定如果不指定，一个主键字段将自动添加到模型中</td>
</tr>
<tr>
<td>CharField</td>
<td>字符串，默认的表单样式是 TextInput</td>
</tr>
<tr>
<td>TextField</td>
<td>大文本字段，一般超过4000使用，默认的表单控件是Textarea</td>
</tr>
<tr>
<td>IntegerField</td>
<td>整数</td>
</tr>
<tr>
<td>DecimalField</td>
<td>使用python的Decimal实例表示的十进制浮点数</td>
</tr>
<tr>
<td>FloatField</td>
<td>用Python的float实例来表示的浮点数</td>
</tr>
<tr>
<td>BooleanField</td>
<td>true/false 字段，此字段的默认表单控制是CheckboxInput，MySQL不支持Bool值，所以ORM会把布尔值转换为tinyint(1)类型</td>
</tr>
<tr>
<td>NullBooleanField</td>
<td>支持null、true、false三种值</td>
</tr>
<tr>
<td>DateField(auto_now=False, auto_now_add=False)</td>
<td>使用Python的datetime.date实例表示的日期</td>
</tr>
<tr>
<td>TimeField</td>
<td>使用Python的datetime.time实例表示的时间，参数同DateField</td>
</tr>
<tr>
<td>DateTimeField</td>
<td>使用Python的datetime.datetime实例表示的日期和时间，参数同DateField，示例：.o_time = modes.DataTimeField(auto_now_add=True)</td>
</tr>
<tr>
<td>FileField</td>
<td>一个上传文件的字段</td>
</tr>
<tr>
<td>ImageField</td>
<td>继承了FileField的所有属性和方法，但对上传的对象进行校验，确保它是个有效的image</td>
</tr>
</tbody></table>
<pre><code>DateField参数说明
    DateField.auto_now每次保存对象时，自动设置该字段为当前时间，用于&quot;最后一次修改&quot;的时间戳，它总是使用当前日期，默认为false
    DateField.auto_now_add
    1、当对象第一次被创建时自动设置当前时间，用于创建的时间戳，它总是使用当前日期，默认为false
    2、说明
      该字段默认对应的表单控件是一个TextInput. 在管理员站点添加了一个JavaScript写的日历控件，和一个“Today&quot;的快捷按钮，包含了一个额外的invalid_date错误消息键
    3、注意
      auto_now_add, auto_now, and default 这些设置是相互排斥的，他们之间的任何组合将会发生错误的结果</code></pre><h3 id="字段约束"><a href="#字段约束" class="headerlink" title="字段约束"></a>字段约束</h3><table>
<thead>
<tr>
<th>字段约束</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>null</td>
<td>如果为True，Django 将空值以NULL 存储到数据库中，默认值是 False</td>
</tr>
<tr>
<td>blank</td>
<td>如果为True，则该字段允许为空白，默认值是 False，null是数据库范畴的概念，blank是表单验证证范畴的</td>
</tr>
<tr>
<td>db_column</td>
<td>字段的名称，如果未指定，则使用属性的名称</td>
</tr>
<tr>
<td>db_index</td>
<td>若值为 True, 则在表中会为此字段创建索引</td>
</tr>
<tr>
<td>default</td>
<td>默认值</td>
</tr>
<tr>
<td>primary_key</td>
<td>若为 True, 则该字段会成为模型的主键字段</td>
</tr>
<tr>
<td>unique</td>
<td>如果为 True, 这个字段在表中必须有唯一值</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="comment"># max_length: 最大长度</span></span><br><span class="line">    <span class="comment"># unqiue: 唯一性</span></span><br><span class="line">    <span class="comment"># db_column: 自定义字段名，如果不定义，就直接使用s_name</span></span><br><span class="line">    s_name = models.CharField(max_length=<span class="number">16</span>,unique=<span class="literal">True</span>,db_column=<span class="string">'name'</span>)</span><br><span class="line">    s_age = models.IntegerField(default=<span class="number">18</span>,db_column=<span class="string">'age'</span>)</span><br><span class="line">    <span class="comment"># False表示男，True表示女</span></span><br><span class="line">    s_sex = models.BooleanField(default=<span class="literal">False</span>,db_column=<span class="string">'sex'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 自定义表名</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'People'</span></span><br></pre></td></tr></table></figure>





<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p>显性属性（开发者手动声明的属性），隐性属性（没有声明，父类中也不存在，动态产生出来的；如果开发者主动声明这些属性，隐性属性自己就不再产生了）</p>
<h1 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h1><h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><p>事前准备：</p>
<p>1、在总的urls中注册App的urls</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^admin/'</span>, admin.site.urls),</span><br><span class="line">    url(<span class="string">r'^app/'</span>,include(<span class="string">"App.urls"</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<p>2、创建并且编写App的urls.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> App <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^addStudent/'</span>, views.addStudent),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<p>3、创建views中的函数，用于添加学生数据</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Create your views here.</span><br><span class="line">def addStudent(request):</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return HttpResponse(&quot;学生数据添加成功&quot;)</span><br></pre></td></tr></table></figure>

<p>4、手动创建几个Grade字段</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2020/03/28/RH1NuUcz2hsofJa.png" alt="django(二)-4"></p>
<p>创建数据的几种方式</p>
<p>1、直接实例化对象设置属性</p>
<p>2、创建对象传入属性</p>
<p>3、使用Model.objects.create()</p>
<p>4、自己封装类方法创建</p>
<p>5、使用Manager()中封装方法创建</p>
<p>6、直接调用类方法添加数据</p>
<h3 id="1、直接实例化对象设置属性"><a href="#1、直接实例化对象设置属性" class="headerlink" title="1、直接实例化对象设置属性"></a>1、直接实例化对象设置属性</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student()</span><br><span class="line">    student.s_name = <span class="string">"Jack"</span></span><br><span class="line">    grade  = Grade.objects.get(pk=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">"What is The Grade Type:"</span>,type(grade))  <span class="comment"># &lt;class 'App.models.Grade'&gt;</span></span><br><span class="line">    student.s_grade = grade <span class="comment"># 因为Student和Grade进行了外键关联，这里需要传入的是一个Grade的示例，不然会报错</span></span><br><span class="line">    student.s_password = <span class="string">"123456789"</span></span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"学生数据添加成功1"</span>)</span><br></pre></td></tr></table></figure>

<p>之后在Student表中就会多出一行数据了</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MariaDB [model3]&gt; select * <span class="keyword">from</span> App_student;</span><br><span class="line">+----+--------+------------+------------+</span><br><span class="line">| id | s_name | s_password | s_grade_id |</span><br><span class="line">+----+--------+------------+------------+</span><br><span class="line">|  <span class="number">1</span> | Jack   | <span class="number">123456789</span>  |          <span class="number">1</span> |</span><br><span class="line">+----+--------+------------+------------+</span><br></pre></td></tr></table></figure>



<h3 id="2、创建对象传入属性"><a href="#2、创建对象传入属性" class="headerlink" title="2、创建对象传入属性"></a>2、创建对象传入属性</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    grade = Grade.objects.get(pk=<span class="number">3</span>)</span><br><span class="line">    student = Student(s_name=<span class="string">'Rose'</span>,s_password=<span class="string">'abcdefg'</span>,s_grade=grade)</span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"学生数据添加成功2"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="3、使用Model-objects-create"><a href="#3、使用Model-objects-create" class="headerlink" title="3、使用Model.objects.create()"></a>3、使用Model.objects.create()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    grade = Grade.objects.get(pk=<span class="number">2</span>)</span><br><span class="line">    student = Student.objects.create(s_name=<span class="string">'Niki'</span>,s_password=<span class="string">'987654321'</span>,s_grade=grade)</span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"学生数据添加成功3"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="4、自己封装类方法创建"><a href="#4、自己封装类方法创建" class="headerlink" title="4、自己封装类方法创建"></a>4、自己封装类方法创建</h3><p>封装自己的类方法，可以添加默认值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    s_name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_password = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_grade = models.ForeignKey(Grade)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(cls,s_name,s_grade,s_password=<span class="string">'PASWD'</span>)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> cls(s_name=s_name,s_password=s_password,s_grade=s_grade)</span><br></pre></td></tr></table></figure>



<p>调用自己封装的类方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    grade = Grade.objects.get(pk=<span class="number">2</span>)</span><br><span class="line">    student = Student.objects.create(s_name=<span class="string">'Bool'</span>,s_password=<span class="string">'poiuytq'</span>,s_grade=grade)</span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"学生数据添加成功4"</span>)</span><br></pre></td></tr></table></figure>





<h3 id="5、使用Manager-中封装方法创建"><a href="#5、使用Manager-中封装方法创建" class="headerlink" title="5、使用Manager()中封装方法创建"></a>5、使用Manager()中封装方法创建</h3><p>在Models中定义Manager()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    s_name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_password = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_grade = models.ForeignKey(Grade)</span><br><span class="line">	<span class="comment"># 多出来这1行，之后调用的时候可以写Student.s_m ，而不是Student.object </span></span><br><span class="line">    s_m = models.Manager()</span><br></pre></td></tr></table></figure>



<p>在views中调用Manager()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    grade = Grade.objects.get(pk=<span class="number">2</span>)</span><br><span class="line">    student = Student.s_m.create(s_name=<span class="string">'ZJ'</span>,s_password=<span class="string">'ILKEY'</span>,s_grade=grade)</span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"学生数据添加成功5"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="6、直接调用类方法添加数据"><a href="#6、直接调用类方法添加数据" class="headerlink" title="6、直接调用类方法添加数据"></a>6、直接调用类方法添加数据</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">person = Person.create(<span class="string">'Neo'</span>,<span class="number">18</span>)</span><br><span class="line">person.save()</span><br></pre></td></tr></table></figure>



<h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><p>删除是基于查询的，把查询到的结果进行删除，这里删除的是主键为2的，因为刚刚jack插入了两次，重复了，所以删了。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student.objects.get(pk=<span class="number">2</span>)</span><br><span class="line">    student.delete()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"删除成功！"</span>)</span><br></pre></td></tr></table></figure>



<h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><p>修改是基于查询的，修改后保存。</p>
<p>此时的数据库表：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MariaDB [model3]&gt; select * <span class="keyword">from</span> App_student;</span><br><span class="line">+----+--------+------------+------------+</span><br><span class="line">| id | s_name | s_password | s_grade_id |</span><br><span class="line">+----+--------+------------+------------+</span><br><span class="line">|  <span class="number">1</span> | Jack   | <span class="number">123456789</span>  |          <span class="number">1</span> |</span><br><span class="line">|  <span class="number">3</span> | Niki   | <span class="number">987654321</span>  |          <span class="number">1</span> |</span><br><span class="line">|  <span class="number">4</span> | Rose   | abcdefg    |          <span class="number">3</span> |</span><br><span class="line">|  <span class="number">5</span> | Bool   | poiuytq    |          <span class="number">2</span> |</span><br><span class="line">|  <span class="number">6</span> | ZJ     | ILKEY      |          <span class="number">2</span> |</span><br><span class="line">+----+--------+------------+------------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<p>我们把Bool用户的ZJ用户的Password修改为：oiuytre</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student.objects.get(s_name=<span class="string">'ZJ'</span>)</span><br><span class="line">    student.s_password = <span class="string">"oiuytre"</span></span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"修改成功！"</span>)</span><br></pre></td></tr></table></figure>



<h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><p>查询句柄objects，objects是Manager()的实例，操作都封装在了objects里面，如<code>Person.objects.all()</code>，如果不想使用object对象，可以重写Manager()方法，详情见<strong>增</strong>的第5点。    </p>
<p>object ——&gt; Manager ——&gt; BaseManager ——&gt; get_queryset</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span><span class="params">(BaseManager.from_queryset<span class="params">(QuerySet)</span>)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>BaseManager是个类，类下面有get_queryset方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Returns a new QuerySet object.  Subclasses can override this method to</span></span><br><span class="line"><span class="string">    easily customize the behavior of the Manager.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">return</span> self._queryset_class(model=self.model, using=self._db, hints=self._hints)</span><br></pre></td></tr></table></figure>



<p>Student.objects.all()方法是调用的get_queryset方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">all</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="comment"># We can't proxy this method through the `QuerySet` like we do for the</span></span><br><span class="line">    <span class="comment"># rest of the `QuerySet` methods. This is because `QuerySet.all()`</span></span><br><span class="line">    <span class="comment"># works by creating a "copy" of the current queryset and in making said</span></span><br><span class="line">    <span class="comment"># copy, all the cached `prefetch_related` lookups are lost. See the</span></span><br><span class="line">    <span class="comment"># implementation of `RelatedManager.get_queryset()` for a better</span></span><br><span class="line">    <span class="comment"># understanding of how this comes into play.</span></span><br><span class="line">    <span class="keyword">return</span> self.get_queryset()</span><br></pre></td></tr></table></figure>



<p>查询方法最后都会归结到get_queryset方法，所以只要对这个方法做封装，就可以实现定制化查询，比如逻辑删除后的查询。</p>
<h3 id="获取查询结果集"><a href="#获取查询结果集" class="headerlink" title="获取查询结果集"></a>获取查询结果集</h3><p>all、filter、exclude、order_by、values、切片</p>
<p>链式调用：person.objects.filter().filter()…..exclude()…</p>
<h4 id="all"><a href="#all" class="headerlink" title="all"></a>all</h4><p>返回所有数据</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.all()</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    print("数据:",students,"类型:",type(students))</span></span><br><span class="line"><span class="string">    数据: &lt;QuerySet [&lt;Student: Student object&gt;, 。。。。&gt;</span></span><br><span class="line"><span class="string">    类型: &lt;class 'django.db.models.query.QuerySet'&gt;</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(<span class="string">"姓名：&#123;0&#125; 密码：&#123;1&#125; "</span>.format(student.s_name,student.s_password))</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    姓名：Jack 密码：123456789</span></span><br><span class="line"><span class="string">    姓名：Niki 密码：987654321</span></span><br><span class="line"><span class="string">    姓名：Rose 密码：abcdefg</span></span><br><span class="line"><span class="string">    姓名：Bool 密码：poiuytq</span></span><br><span class="line"><span class="string">    姓名：ZJ 密码：oiuytre</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>





<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>过滤操作，将符合条件的对象过滤出来，exclude和filter相反，exclude是过滤出不符合条件的数据</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.filter(pk__gt=<span class="number">3</span>) <span class="comment"># 主键 &gt;3</span></span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(<span class="string">"姓名：&#123;0&#125; 密码：&#123;1&#125; "</span>.format(student.s_name,student.s_password))</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    姓名：Rose 密码：abcdefg</span></span><br><span class="line"><span class="string">    姓名：Bool 密码：poiuytq</span></span><br><span class="line"><span class="string">    姓名：ZJ 密码：oiuytre</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h4 id="order-by"><a href="#order-by" class="headerlink" title="order_by"></a>order_by</h4><p>依照指定的字段名进行排序输出</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.order_by(<span class="string">'-s_name'</span>) <span class="comment"># 负号表示反序</span></span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(<span class="string">"姓名：&#123;0&#125; 密码：&#123;1&#125; "</span>.format(student.s_name,student.s_password))</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    姓名：ZJ 密码：oiuytre</span></span><br><span class="line"><span class="string">    姓名：Rose 密码：abcdefg</span></span><br><span class="line"><span class="string">    姓名：Niki 密码：987654321</span></span><br><span class="line"><span class="string">    姓名：Jack 密码：123456789</span></span><br><span class="line"><span class="string">    姓名：Bool 密码：poiuytq</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h4 id="values"><a href="#values" class="headerlink" title="values"></a>values</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students_all = Student.objects.values()  <span class="comment"># 以字典的形式返回</span></span><br><span class="line">    <span class="keyword">for</span> students <span class="keyword">in</span> students_all: <span class="comment"># 把每个用户字典集中取出来</span></span><br><span class="line">        print(<span class="string">"-------------------------------------"</span>)</span><br><span class="line">        <span class="keyword">for</span> student <span class="keyword">in</span> students.items(): <span class="comment"># 把用户的每个元素从字典中取出来</span></span><br><span class="line">            print(student)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h4 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h4><ul>
<li><p>和Python中的切片不太一样</p>
</li>
<li><p>QuerySet[5:15] 获取第5到15条数据，相当于SQL中的Limit和Offset</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.all()[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(<span class="string">"姓名：&#123;0&#125; 密码：&#123;1&#125; "</span>.format(student.s_name,student.s_password))</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    姓名：Jack 密码：123456789</span></span><br><span class="line"><span class="string">    姓名：Niki 密码：987654321</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>





<h3 id="获取查询条件的单个对象"><a href="#获取查询条件的单个对象" class="headerlink" title="获取查询条件的单个对象"></a>获取查询条件的单个对象</h3><p>first、last、get、exist</p>
<h4 id="first"><a href="#first" class="headerlink" title="first"></a>first</h4><p>返回查询集中的第一个对象</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student.objects.last()  <span class="comment"># 返回查询的最后个对象</span></span><br><span class="line">    print(student.s_name)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><p>返回查询集中的最后一个对象</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student.objects.last()  <span class="comment"># 返回查询的第一个对象</span></span><br><span class="line">    print(student.s_name)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>





<h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><p>返回一个满足条件的对象，如果没有找到符合条件的对象， 会引发DoesNotExist异常，如果找到多个，会引发模型MultiObjectsReturned异常，可以使用<code>try ... except 模型类.异常...</code>的方式捕获异常。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        student = Student.objects.get(pk=<span class="number">11</span>)</span><br><span class="line">        print(student.s_name)</span><br><span class="line">    <span class="keyword">except</span> Student.DoesNotExist:</span><br><span class="line">        print(<span class="string">"用户不存在"</span>)</span><br><span class="line">    <span class="keyword">except</span> Student.MultipleObjectsReturned:</span><br><span class="line">        print(<span class="string">"存在多个用户"</span>)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h4 id="exist"><a href="#exist" class="headerlink" title="exist"></a>exist</h4><p>判断查询结果是否存在</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    result = Student.objects.filter(s_name=<span class="string">'ZJ'</span>).exists()</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="查询条件"><a href="#查询条件" class="headerlink" title="查询条件"></a>查询条件</h3><p>表达式：属性__操作符=临界值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">- gt  大于</span><br><span class="line">- lt  小于</span><br><span class="line">- gte 大于等于</span><br><span class="line">- lte 小于等于</span><br><span class="line">- <span class="keyword">in</span> 在某一集合中</span><br><span class="line">- contains  	类似于模糊查询like</span><br><span class="line">- startswith  	以xx开始，本质也是like</span><br><span class="line">- endswith 		以xx结束，也是like</span><br><span class="line">- exact  精确等于,相当于 == </span><br><span class="line"></span><br><span class="line">- 前面同时添加i , ignore 忽略</span><br><span class="line">  - iexact  忽略大小写的匹配</span><br><span class="line">  - icontains</span><br><span class="line">  - istartswith</span><br><span class="line">  - iendswith</span><br><span class="line">- isnull 、isnotnull</span><br><span class="line"></span><br><span class="line">- django中查询条件有时区问题</span><br><span class="line">  - 关闭django中自定义的时区</span><br><span class="line">  - 在数据库中创建对应的时区表</span><br></pre></td></tr></table></figure>



<p>示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.filter(pk__gt = <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(student.s_name)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>





<h3 id="FQ对象"><a href="#FQ对象" class="headerlink" title="FQ对象"></a>FQ对象</h3><p>F对象和Q对象</p>
<p>F对象</p>
<ul>
<li>可以获取我们属性的值</li>
<li>可以实现一个模型不同属性的运算操作</li>
<li>还可以支持算术运算</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可以使用模型的A属性与B属性进行比较</span></span><br><span class="line"></span><br><span class="line">grades = Grade.objects.filter(ggirlnum__gt=F(<span class="string">'gboynum'</span>) )</span><br><span class="line"></span><br><span class="line"><span class="comment"># F对象支持算数运算</span></span><br><span class="line"></span><br><span class="line">grades = Grade.objects.filter(ggirlnum__gt=F(<span class="string">'gboynum'</span>) +<span class="number">10</span> )</span><br></pre></td></tr></table></figure>







<p>Q对象</p>
<p>过滤器的方法中的关键参数，常用于组合条件</p>
<p>对查询条件进行封装， 封装之后支持逻辑运算</p>
<ul>
<li>与 &amp; and</li>
<li>或  |  or</li>
<li>非  ~  not</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="comment"># 查询主键值在[2,4]之间的用户</span></span><br><span class="line">    students = Student.objects.filter(Q(pk__gte = <span class="number">2</span>) &amp; Q(pk__lte =<span class="number">4</span>))</span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(student.s_name)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>使用aggregate()函数返回聚合函数的值</p>
<p>Avg：平均值</p>
<p>Count：数量</p>
<p>Max：最大</p>
<p>Min：最小</p>
<p>Sum：求和</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    result = Student.objects.aggregate(Count(<span class="string">'s_name'</span>))</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    &#123;'s_name__count': 5&#125;</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>





<h3 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h3><p>对于重要数据都做逻辑删除，不做物理删除，实现方法是定义isDelete属性，类型为BooleanField，默认值为False。</p>
<p>修改数据库表单</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    s_name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_password = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_grade = models.ForeignKey(Grade)</span><br><span class="line">    is_delete = models.BooleanField(default=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>



<p>进行文件迁移</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>



<p>先查询所有项</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查询函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.filter(is_delete=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(<span class="string">"姓名：&#123;0&#125; 密码：&#123;1&#125; "</span>.format(student.s_name, student.s_password))</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<blockquote>
<p>姓名：Jack 密码：123456789<br>姓名：Niki 密码：987654321<br>姓名：Rose 密码：abcdefg<br>姓名：Bool 密码：poiuytq<br>姓名：ZJ 密码：oiuytre</p>
</blockquote>
<p>删除其中某项</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 实际上是把is_delete字段修改为True，并不是真的删除</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student.objects.get(s_name=<span class="string">'ZJ'</span>)</span><br><span class="line">    student.is_delete = <span class="literal">True</span></span><br><span class="line">    student.save()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"修改成功！"</span>)</span><br></pre></td></tr></table></figure>



<p>再次查询结果：</p>
<blockquote>
<p>姓名：Jack 密码：123456789<br>姓名：Niki 密码：987654321<br>姓名：Rose 密码：abcdefg<br>姓名：Bool 密码：poiuytq</p>
</blockquote>
<p>这样做可以实现对重要数据不是真的删除，但是有一个缺点，我们每次查询的时候，都需要加上<code>is_delete=False</code>这样一个选项，能不能有什么改进的措施呢？</p>
<p>可以通过自定义Manager实现统一封装，重写get_queryset方法，这样就不需要在查询的时候写<code>filter(is_delete=False)</code></p>
<p>1、修改models.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grade</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    g_grade = models.CharField(max_length=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentManager</span><span class="params">(models.Manager)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> super(StudentManager,self).get_queryset().filter(is_delete=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    s_name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_password = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    s_grade = models.ForeignKey(Grade)</span><br><span class="line">    is_delete = models.BooleanField(default=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    objects = StudentManager() <span class="comment"># 对Manager的实例Objects的get_qeuryset方法在进行一层封装</span></span><br></pre></td></tr></table></figure>



<p>2、这样查询语句中的is_delete字段就可以去掉了</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    students = Student.objects.filter()</span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> students:</span><br><span class="line">        print(<span class="string">"姓名：&#123;0&#125; 密码：&#123;1&#125; "</span>.format(student.s_name, student.s_password))</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">·分类</span><br><span class="line">	·ForeignKey：一对多，将字段定义在多的端中</span><br><span class="line">	·ManyToManyField：多对多，将字段定义在两端中</span><br><span class="line">	·OneToOneField：一对一，将字段定义在任意一端中</span><br><span class="line"></span><br><span class="line">·用一访问多</span><br><span class="line">	·格式</span><br><span class="line">		·对象.模型类小写_set</span><br><span class="line">	·示例</span><br><span class="line">		grade.students_set</span><br><span class="line"></span><br><span class="line">·用一访问一</span><br><span class="line">	·格式</span><br><span class="line">		·对象.模型类小写</span><br><span class="line">	·示例</span><br><span class="line">		·grade.students</span><br><span class="line"></span><br><span class="line">·访问id</span><br><span class="line">	·格式</span><br><span class="line">		·对象.属性_id</span><br><span class="line">	·示例</span><br><span class="line">		·student.s_grade_id</span><br></pre></td></tr></table></figure>







<p>1、通过学生的姓名查询学生所在的班级，使用外键作为连接：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    student = Student.objects.get(s_name=<span class="string">'Rose'</span>)</span><br><span class="line">    print(student.s_grade.g_grade) <span class="comment"># Science</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<p>2、直接查询</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queStudent</span><span class="params">(request)</span>:</span></span><br><span class="line">    grade = Grade.objects.get(student__s_name=<span class="string">'Rose'</span>)</span><br><span class="line">    print(grade.g_grade) <span class="comment"># Science</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"查询成功"</span>)</span><br></pre></td></tr></table></figure>



<h2 id="缓存集"><a href="#缓存集" class="headerlink" title="缓存集"></a>缓存集</h2><ul>
<li>filter、exclude、all 都不会真正的去查询数据库</li>
<li>只有我们在迭代结果集，或者获取单个对象属性的时候，它才会去查询数据库</li>
<li>懒查询：为了优化我们结构和查询</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ZEN</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="../../../../https:/archks.github.io/2020/03/28/Django_Models/">https://archks.github.io/2020/03/28/Django_Models/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://archks.github.io" target="_blank">zen's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../../../tags/Django/">Django</a></div><div class="post_share"><div class="social-share" data-image="../../../../img/post.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="../../../../https:/cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="../../../../https:/cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="../../../04/01/Redis/"><img class="prev-cover" data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="../../../../img/post.jpg" onerror="onerror=null;src='../../../../img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Redis</div></div></a></div><div class="next-post pull-right"><a href="../../02/SQL/"><img class="next-cover" data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="../../../../img/post.jpg" onerror="onerror=null;src='../../../../img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Mysql常用语句</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By ZEN</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="../../../../https:/cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="../../../../js/utils.js"></script><script src="../../../../js/main.js"></script><script src="../../../../js/tw_cn.js"></script><script src="../../../../https:/cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="../../../../https:/cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="../../../../js/third-party/fireworks.js"></script><script defer id="ribbon" src="../../../../js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="ribbon_piao" mobile="true" src="../../../../js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="../../../../js/third-party/canvas-nest.js"></script><script src="../../../../js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="../../../../busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="../../../../https:/cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="../../../../https:/cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="../../../../js/third-party/click_heart.js"></script><script src="../../../../js/third-party/ClickShowText.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],e=void 0,0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>